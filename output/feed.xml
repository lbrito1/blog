<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:base="https://lbrito1.github.io/blog/">
  <id>https://lbrito1.github.io/blog/</id>
  <title>A Developer's Notebook</title>
  <updated>2024-11-21T08:00:00Z</updated>
  <link rel="alternate" href="https://lbrito1.github.io/blog/" type="text/html"/>
  <link rel="self" href="https://lbrito1.github.io/blog/feed.xml" type="application/atom+xml"/>
  <author>
    <name>Leonardo Brito</name>
    <uri>https://lbrito1.github.io</uri>
  </author>
  <entry>
    <id>tag:lbrito1.github.io,2024-11-21:/blog/2024/21/thoughts-on-llm.html</id>
    <title type="html">Thoughts on LLMs in software engineering</title>
    <published>2024-11-21T08:00:00Z</published>
    <updated>2024-11-21T08:00:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2024/21/thoughts-on-llm.html" type="text/html"/>
    <content type="html">&lt;p&gt;The “catastrophe scenario” of AI in the software engineering job market has gained quite a lot of popularity, with people pointing out that current models already “do a better job” (what does that even mean?) than many professional programmers. I’m not sure I completely buy into this.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Personally, I’ve found that the most useful use of LLMs during software development is to speed up tasks that I &lt;em&gt;already know&lt;/em&gt; how to do, such as “write a spec suite with these scenarios”. The results are usually reasonably good, and with some careful nudging into the right direction, I usually get things done much faster than I would have otherwise. This is fundamentally different from having a chatbot fully &lt;em&gt;replace&lt;/em&gt; me as a programmer.&lt;/p&gt;

&lt;p&gt;I began by saying I don’t buy into the fear hype, but things get complicated when you look at the big picture. The way I described using LLMs is similar or analogous as to the way an engineering manager might assign feature work to developers, or a lead programmer working along a junior programmer: I have these tasks in mind, I have a clear idea of how to get them done, and I offload to it to this thing that will hopefully spit out more or less what I was expecting. And in that similarity lays the potential issue - given enough people in the industry are using it in this same way, the necessity of more junior developers might diminish.&lt;/p&gt;

&lt;p&gt;Another way of looking at this is through productivity. I’m probably not producing better code, but I am definitively producing code much faster than before. Let’s assume this is an industry-wide trend. Other programmers are similarly experiencing increases in productivity. So, all other things equal, the industry suddenly has a considerable surplus of productivity. Where is it going? Its still too early to investigate - ChatGPT 3 came out in 2020, and only in the last couple of years have the models become very good at code. But &lt;a href="https://www.levels.fyi/assets/pdfs/2023Report.pdf"&gt;end of year&lt;/a&gt; salary reports show no meaningful changes in software engineer salaries in the last couple of years. There are two other outlets for productivity: increasing profits and decreasing headcounts. We’ve seen plenty of both recently.&lt;/p&gt;

&lt;p&gt;Also, if we zoom out a little and look at the overall economic productivity in the last decades:&lt;/p&gt;
&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2024/productivity.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2024/productivity.png" alt="Productivity vs wage growth chart in the US. Both lines decouple in the 70s, with productivity growing but wage stagnating."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2024/productivity.png" alt="Productivity vs wage growth chart in the US. Both lines decouple in the 70s, with productivity growing but wage stagnating."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;There’s absolutely no reason to believe that trend will change. If anything, dumping more productivity into the economy will just supercharge the wage-productivity decoupling even further.&lt;/p&gt;

&lt;p&gt;While I’m not personally frightened about being replaced by an LLM - at least not in the murky, barely-visible future - I do have some concerns about the wider industry, specifically for people joining the workforce right now.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2024-11-19:/blog/2024/19/start-with-billing.html</id>
    <title type="html">Start with Billing</title>
    <published>2024-11-19T08:00:00Z</published>
    <updated>2024-11-19T08:00:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2024/19/start-with-billing.html" type="text/html"/>
    <content type="html">&lt;p&gt;I’ve been working on a side project with a friend for well over a year now, and in addition to the joy of working with someone you like on a problem of your choice, I’ve had quite a lot of “aha” (or “oh…”) moments.&lt;/p&gt;

&lt;p&gt;We’re both basically happy with the state of our little project, with just a few small tweaks remaining before we can send it off into the world, except for one not-so-small thing: billing.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;There are several fairly obvious reasons why we (and anyone, really) left billing last: it is an unappealing, generic thing to work on, as opposed to the very cool and very specific features we have worked on that are particular to our project. And besides, we didn’t even know if we would get this far: maybe we lost interest in the project midway, or personal circumstances forced us out of it, or some unforeseen technical limitation rendered it unfeasible, or an identical twin project beat us to market. Starting with billing sounded a bit silly, presumptuous even, and a waste of time.&lt;/p&gt;

&lt;p&gt;Alas, a year later and with bountiful hindsight, I see clearly that that was &lt;em&gt;exactly&lt;/em&gt; what we should have started with. Maybe not the very first line of code, but Billing should definitively be among priorities of the first few months of a project.&lt;/p&gt;

&lt;p&gt;The reasons for that are embarrassingly simple, and I’m sure all the cool guys have said it before a thousand times: Without Billing the project won’t launch. It precludes all the rest of it. Yes, the project can still flop, be abandoned, or succumb to a number of unpredictable mishaps. But we can say with 100% certainty that none of the cool features we worked hard on matter unless there is a sustainable way of financing them. Next time, I will start with Billing!&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2024-10-22:/blog/2024/10/leaving-vancouver.html</id>
    <title type="html">Leaving Vancouver</title>
    <published>2024-10-22T23:30:00Z</published>
    <updated>2024-10-22T23:30:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2024/10/leaving-vancouver.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2024/10/leaving-vancouver.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2024/vancouver.jpg" alt="Dreary view of a foggy city through a highrise balcony."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2024/vancouver.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;So dreary I didn't need to compact this image.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;After about two years living in metro Vancouver, I decided to leave. I’m in a smaller city in the Fraser Valley, and it has been great!&lt;/p&gt;

&lt;p&gt;My first time in Vancouver was for an interview at Amazon in 2019. I stayed at a hotel near the downtown office for a couple of nights, which was less time than I spent in the 6 different airplanes and a similar number of airports to get there from Brazil. Then the pandemic happened. After almost two years waiting for the visa, I finally moved to Vancouver in late 2021.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;My home town of Recife has a tongue-in-cheek tradition of boastfulness, typically claiming ridiculous titles like having the world’s longest street or largest apartment complex. In Vancouver I kind of felt the flipside to that good-natured humour: people seem serious when claiming that this place is the best at this or that.&lt;/p&gt;

&lt;p&gt;At some level, the level of braggadocio found in Vancouver must be part of the all-encompassing real estate industry (which as of 2023 represents 17.75% of BC’s GDP), which obviously benefits from selling the region as the best at everything. But my perception was that everyday people more or less buy into these views, not batting an eye at claims to having “the best” of something - food, transport or housing.&lt;/p&gt;

&lt;p&gt;On housing - I lived for a few months in a high-rise apartment which had around 350 units and only 3 elevators - 15 minute waits for an elevator ride were commonplace (for comparison, my old apartment building in Brazil had 64 units and 2 elevators). Building-wide fire alarms went off once a month for ridiculous things like the ground-level retail burning a tortilla. None of this was seen as abnormal or even a bother - people seemed OK with it.&lt;/p&gt;

&lt;p&gt;The city has a nice natural framing, with ocean and mountains, but that’s really it. The urban environment itself is underwhelming. It looks like any other large North American city, courtesy of having the same draconian zoning laws as basically everywhere else in Canada and the US for the last century or so. The province is going in the right direction by loosening restrictive zoning, but the improvements will take a long time to be noticeable. But my personal impression of Vancouver will remain the blue-gray blandness of the header image, while other places have so much more to offer.&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2024/river-sm.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2024/river-sm.jpg" alt="Photo of a river with many stones and a large log."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2024/river-sm.jpg" alt="Photo of a river with many stones and a large log."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;That's more like it!&lt;/div&gt;
  
&lt;/div&gt;

</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2023-12-26:/blog/2023/12/leaving-amazon.html</id>
    <title type="html">Leaving Amazon</title>
    <published>2023-12-26T23:30:00Z</published>
    <updated>2023-12-26T23:30:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2023/12/leaving-amazon.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2023/12/leaving-amazon.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2023/leaving-amazon-sm.jpg" alt="AI-generated image, parody of office workers vs remote workers. Oil painting in the style of Hieronymous Bosch."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2023/leaving-amazon-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;OpenAI is so much fun!&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I’d like to preface this by stating that Amazon is obviously a huge company, and my opinions are just that, one person’s opinions. There will probably be some people that share my frustrations while others have had a completely different experience.&lt;/p&gt;

&lt;p&gt;I interviewed at AWS in early 2020, pre-pandemic. The interview process is grueling and I spent considerable effort preparing for the 5-hours-long pantomime of absurd algorithms trivia and “tell me a time when you said no” behavioral questions. COVID-induced visa processing delays pushed my start date forward in time many times. The high-stress interview process and years-spanning wait built up tremendous anticipation. In hindsight I can say I probably had somewhat unrealistic expectations when finally joining the company in late 2021.&lt;/p&gt;

&lt;p&gt;Regardless, I was quite frankly shocked after my first couple of weeks, and my first impression was that this kind of work was not for me. As a software engineer, I expected to eventually do some software engineering. I’m not sure how to describe the work that first team I joined was doing, but I can’t in good conscious call it software engineering.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;The bulk of the work consisted of updating configuration files and attending meetings with other teams where the driver would recite what was written in project management cards. No one seemed to really deeply know what the team was doing (or maybe I was too thick to understand it!), and quite frankly no one seemed to care very much. Having worked on very product-centric, fast-paced startups before, this kind of apathetic, complacent attitude was bizarre to me. If you browse Blind for more than five minutes, though, you will see for yourself that this kind of experience is far from being an exception.&lt;/p&gt;

&lt;p&gt;I found my way out of that team as fast as I could. The ability to effortlessly change teams is something truly praiseworthy at Amazon. I got no pushback from my former manager. The whole process is extremely simple and streamlined.&lt;/p&gt;

&lt;p&gt;Although the new team was far more interesting from an engineering perspective and my coworkers much more motivated, it was still an Amazon team. Over time I would understand that while Amazon has a great diversity of teams, they’re all playing the same tune. These are things that bothered me, in no particular order:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Big companies have a way of codifying their customs and culture into lists of commandments (&lt;a href="https://nymag.com/intelligencer/article/ray-dalio-rob-copeland-the-fund-book-excerpt.html"&gt;1&lt;/a&gt;, &lt;a href="https://www.kochagenergy.com/marketbasedmanagement/"&gt;2&lt;/a&gt;, &lt;a href="https://www.amazon.jobs/content/en/our-workplace/leadership-principles"&gt;3&lt;/a&gt;) that are often vague and contradictory. No one has figured out yet how to make true believers out of new hires, but you are expected to at least pay lip service to their moral code. In the day-to-day work life of rank-and-file employees, these dogmas are at best a hurdle that regular folk have to navigate around, and at worst become weapons to justify doing or not doing whatever you want.&lt;/li&gt;
  &lt;li&gt;Tooling. No matter how good an external solution is, there is an internal tool that is twice as difficult to use and half as good. This isn’t any developer’s fault, by the way, and almost always is a side effect of either legal requirements (software licensing), legacy decisions made long ago, or empire building. More on that later.&lt;/li&gt;
  &lt;li&gt;It is a large company where decisions flow from top to bottom. These decisions are to be accepted as facts of life. There is no conversation, no room for debate, and no one to appeal to. No exception, no accommodation. Scream against the wind all you want, write a petition with 30,000 signatures - doesn’t matter.&lt;/li&gt;
  &lt;li&gt;Big ships take a long time to turn around. Everything moves slowly and there is little space for experimentation. Do you have a good idea? Maybe something dozens of others also agree is a good idea? Good luck getting that into any roadmap.&lt;/li&gt;
  &lt;li&gt;Empire building. This follows almost as a direct result of the previous two points. Higher-level people decide things and those things get built, regardless of whether its a good idea &lt;a href="https://www.cnbc.com/2023/10/04/amazon-shuts-down-amp-live-audio-service.html"&gt;or not&lt;/a&gt;. Promotions are vastly politics-driven, and large orgs seem to form around who has more political clout than any technical or business realities.&lt;/li&gt;
  &lt;li&gt;Apathy towards the craft. I struggled to find passionate, highly motivated and competent engineers at Amazon. I met a few excellent engineers, but most seemed to only punch in and out, with near-zero interest in anything related to programming or technology outside of working hours.&lt;/li&gt;
  &lt;li&gt;Misaligned incentives with the Leadership Principles. LPs are always the strongest force directing everything at work; engineers are trained to think about how their work artifacts align with the LPs, &lt;em&gt;not&lt;/em&gt; on the quality or usefulness of what they are doing, which is usually left as an “if we have time for that” afterthought.&lt;/li&gt;
  &lt;li&gt;Unstable, untrustworthy leadership. I was truly blessed to work with first-grade direct managers. Higher level leadership, however, had some truly bizarre behavior the last few years, like the poorly-communicated, seemingly endless waves of layoffs or the disastrous return-to-office and return-to-hub policies.&lt;/li&gt;
  &lt;li&gt;Collaboration culture. While at any other job I would expect to be able to find a subject-matter expert on something, contact them and maybe do some quick pair programming, this is highly frowned upon at Amazon. There are good reasons for that: the company is too big for this kind of fast, informal interaction, and SMEs of highly demanded services would be quickly be overwhelmed by DMs if this were a thing. Moats are built to prevent that; instead of just asking someone about something, many times you will have to file a ticket and wait a week or more for office hours, which ends up being about as useful as DIY research in the internal platforms.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Some of the above is to be expected in any large company, and I could live with many of those issues. The one thing that convinced me that I needed to leave, though, was the stuck-in-quicksand feeling that working at Amazon was a career terminus. This was the first time in my career I felt that my day job was actively working against me, making me a &lt;em&gt;worse&lt;/em&gt; software developer. There’s a choice to be made: keep up with the industry or keep up with Amazon’s internal technologies and tooling.&lt;/p&gt;

&lt;p&gt;There was no new technology or innovative engineering process for me to learn. Simple problems become complicated ones because of the internal tooling overhead, leaving little time to work on more interesting things.&lt;/p&gt;

&lt;p&gt;Going full circle, I want to restate the above is just my experience. I’m sure there are teams, maybe many of them, that contradict some or all of what I listed. I’ve never had demanding on-calls, for instance, which are an extremely common complaint at Amazon (I’ve personally seen friends and acquaintances leave a dinner party after being paged). To those who enjoy working there I wish only the best.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2022-07-15:/blog/2022/07/books-sapiens.html</id>
    <title type="html">Book review - Sapiens</title>
    <published>2022-07-15T17:54:50Z</published>
    <updated>2022-07-15T17:54:50Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2022/07/books-sapiens.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2022/07/books-sapiens.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2022/obelisk.jpg" alt="Obelisk scene from the movie 2001"&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/obelisk.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Sapiens in an image.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Sapiens has no central point being made; rather there’s an intricate web of mostly interdependent theories and speculations. This makes for an enjoyable read, however at times it is easy to lose sight of the original premises used to build up on increasingly speculative conclusions.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;His reflections on early humanity, what the author calls &lt;a href="https://en.wikipedia.org/wiki/Behavioral_modernity"&gt;Cognitive Revolution&lt;/a&gt; and the unforeseen consequences of the &lt;a href="https://en.wikipedia.org/wiki/Neolithic_Revolution"&gt;Agricultural Revolution&lt;/a&gt; are the most interesting. Homo Sapiens’ edge over the competing species was the ability to operate in shared imagined worlds, which eventually developed into modern states, complex economies and religions. These shared worlds allow large numbers of individuals to cooperate towards large projects unfeasible to smaller bands. And while this might have hugely increased human population, it also meant worse living conditions for the average person: grain-based civilizations are more susceptible to famines, droughts and plagues than their hunter-gatherer predecessors.&lt;/p&gt;

&lt;p&gt;Less interesting are the speculations on the future of humanity in the later, basically envisioning a very prolonged or eternal life based on vague hopes of medical breakthroughs/transhumanism. Its really just a very tired rehash of &lt;a href="https://en.wikipedia.org/wiki/Tree_of_life"&gt;ancient myths&lt;/a&gt;. Weirdly, Harari kind of implicitly admits this by citing those same myths and insinuating that his hopes are of the same vein or kin.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2022-07-13:/blog/2022/07/books-collapse.html</id>
    <title type="html">Book review - Collapse</title>
    <published>2022-07-13T17:54:50Z</published>
    <updated>2022-07-13T17:54:50Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2022/07/books-collapse.html" type="text/html"/>
    <content type="html">
&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2022/07/books-collapse.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2022/viking-greenland-sm.jpg" alt="Hvalsey church ruins, Greenland"&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/viking-greenland-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Hvalsey church ruins, Greenland. Credit: https://en.wikipedia.org/wiki/User:Number_57&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Collapse&lt;/em&gt; is a fascinating, if somewhat exhausting, read. The central point of the book is that environmental changes, man-made or not, have been responsible for many a civilization’s collapse.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;In the year 2022 that claim might perhaps sound obvious, but the fascinating part is learning &lt;em&gt;how&lt;/em&gt; these stories unfold, often with unexpected twists and many unintended consequences. For instance, medieval Scandinavians found in Greenland a scenery not unlike their native northern Europe, and proceeded to build a society over there replicating what they had back home. This worked for a while – centuries, in fact – but proved ultimately unsustainable and disastrous. An overview of modern Montana’s environmental and economic woes sends the message: what happened before might be happening again.&lt;/p&gt;

&lt;p&gt;Less brilliant are the chapters regarding Central America, specifically the chapter on Haiti. It glosses through the island’s modern history while failing to mention the single most important historical fact about it: the &lt;a href="https://theconversation.com/when-france-extorted-haiti-the-greatest-heist-in-history-137949"&gt;extortion of Haiti by France&lt;/a&gt;, in which France, backed by the United States, demanded indemnity by the loss of property (including the enslaved Haitians themselves), militarily extorting the tiny island with warships in probably modern history’s greatest heist. &lt;a href="https://en.wikipedia.org/wiki/Haiti_indemnity_controversy"&gt;The last payment was made only in 1947&lt;/a&gt;. Given the minutiae of other historical facts included in the book, which are trivia by comparison, this jarring gap can only be seen as intentional.&lt;/p&gt;

&lt;p&gt;As for the previously mentioned exhaustion: the book gets its point across clearly long before its final chapters, which in turn seem a bit redundant and repetitive.&lt;/p&gt;

&lt;p&gt;Jared Diamond is a somewhat controversial scholar, often accused of &lt;a href="https://en.wikipedia.org/wiki/Environmental_determinism"&gt;geographic determinism&lt;/a&gt;. There is plenty of self-justification of the contrary in &lt;em&gt;Collapse&lt;/em&gt;, which makes you wonder.&lt;/p&gt;

&lt;p&gt;Be that as it may, and even with the embarrassing failings mentioned above, &lt;em&gt;Collapse&lt;/em&gt; is an excellent read.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2022-07-10:/blog/2022/07/next-dalle.html</id>
    <title type="html">DALL·E minis of the future won't be fun</title>
    <published>2022-07-10T23:30:00Z</published>
    <updated>2022-07-10T23:30:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2022/07/next-dalle.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2022/07/next-dalle.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2022/stalin-drone-sm.jpg" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/stalin-drone-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I’ve been playing with &lt;a href="https://huggingface.co/spaces/dalle-mini/dalle-mini"&gt;dalle-mini&lt;/a&gt; the last few weeks. Part of what makes it fun to play with are the bizarre and obtuse outputs. They reached that sweet spot between laughably bad and frighteningly perfect: they’re good enough to be understood and enjoyed, basically.&lt;/p&gt;

&lt;p&gt;I think that incompleteness is part of what makes it so amusing to toy with these things, and conversely what will make future versions much less fun.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Dalle-mini is, as the name implies, much smaller than dall-e, using 0.4 billion parameters instead of 12 billion. Dall-e isn’t entirely publicly available so dall-e mini is more of an reconstruction/reverse engineering effort rather than just a toned down version (extracted from &lt;a href="https://wandb.ai/dalle-mini/dalle-mini/reports/DALL-E-Mini-Explained--Vmlldzo4NjIxODA#the-dall-e-experiment"&gt;their website&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Future iterations will be far more impressive. Consider the &lt;a href="https://simplified.com/blog/ai/dall-e-1-vs-dall-e-2/"&gt;difference between dall-e and dall-e 2&lt;/a&gt;, for instance:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2022/dalle-1-2.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2022/dalle-1-2.jpg" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/dalle-1-2.jpg" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;As they inch closer to perfection – perfection being “indistinguishable from human-made”, by the way – these models will surely be widely commercialized, and eventually easily available.&lt;/p&gt;

&lt;p&gt;I think playing with a near-perfect “future dalle” will be as fun as comparing baking soda packaging at the grocery store. These models will become just another tool. I can see them being widely used to generate birthday card designs, obliterating the probably small niche of birthday card designers. I can’t see them being the next Bruegel the Elder or Hieronymus Bosch.&lt;/p&gt;

&lt;p&gt;As these models become increasingly commoditized, they will blend in with the art industry and eventually be forgotten by the public like all novelties eventually are. An AI-generated corporate décor at the office will be as bland and uninteresting as a human-made one. Eventually the distinction won’t matter. Right now, though, it is hard to mistake a dalle-mini output as being created by a human, and I think that is part of its appeal.&lt;/p&gt;

&lt;p&gt;Think about the sample inputs that OpenAI gives their model, like “an astronaut riding a horse in photorealistic style”. We don’t really need a near-perfect AI model to amuse ourselves with that thought – our brains are enough.&lt;/p&gt;

&lt;p&gt;Perhaps something similar or analogous happened with videogames. Early 3D games would leave much up to the imagination of the player; the closer games get to perfect graphical realism, however, the more boring and uninteresting they seem (to me). I think the wave of indie games with intentionally “bad” graphics is no accident - there is an undeniable appeal of leaving things out.&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2022/obra-dinn.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2022/obra-dinn.jpg" alt="Screenshot of the video game Return of the Obra Dinn, showing a black-and-white 3D environment."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/obra-dinn.jpg" alt="Screenshot of the video game Return of the Obra Dinn, showing a black-and-white 3D environment."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Return of the Obra Dinn (https://en.wikipedia.org/wiki/Return_of_the_Obra_Dinn)&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;This boils down to what I think is a fundamental misconception about AI held by many people. AI doesn’t (and cannot) &lt;em&gt;create&lt;/em&gt; anything, it just mixes and matches (in very smart ways) things created by humans. The training sets are immense, and the techniques are increasingly complex, but unless there is some radical, foundational pivot, AI is and will be ultimately derivative of human creations. And derivation is ultimately boring. Right now most people still don’t quite grasp this ontological difference between “real” intelligence, which creates things, and AI, which doesn’t (some will claim there really is no difference and humans must operate in the same way, but I won’t get into that).&lt;/p&gt;

&lt;p&gt;This misunderstanding leads to pretty funny situations, like the Google engineer that &lt;a href="https://www.washingtonpost.com/technology/2022/06/11/google-ai-lamda-blake-lemoine/"&gt;claimed a chatbot was sentient&lt;/a&gt;. &lt;a href="https://www.youtube.com/watch?v=iBouACLc-hw"&gt;Its not&lt;/a&gt;. It mixes texts in a smart way. I think people will eventually catch up to this, and when that happens, the improved “mini-dalle” of the future won’t be nearly as interesting or amusing as its less perfect predecessors.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2022-06-12:/blog/2022/06/tesla_dystopia.html</id>
    <title type="html">Teslas are a dystopia</title>
    <published>2022-06-12T01:08:41Z</published>
    <updated>2022-06-12T01:08:41Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2022/06/tesla_dystopia.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2022/06/tesla_dystopia.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2022/tesla-sm.jpg" alt="A Tesla inside a tunnel."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/tesla-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;This could have been a subway.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Since moving to Vancouver metro I’m continuously surprised with how common electric vehicles have become. Some may see the rise of EVs as an exciting turn towards a futuristic &lt;a href="https://en.wikipedia.org/wiki/Solarpunk"&gt;solarpunk&lt;/a&gt; utopia. I see the opposite: they are a dystopia of sorts. They are a dead end, a waste of resources in the wrong direction, a false hope.&lt;/p&gt;

&lt;p&gt;The proliferation of personal electric vehicles is a strong marker of failure. It is a manifestation in the physical world of our inability as a society to move on from a clearly failed, car-centric way of living. Teslas kind of epitomize this – despite being just another very expensive car, despite &lt;a href="https://www.theguardian.com/world/2022/may/27/tesla-catches-fire-vancouver-canada-investigation"&gt;catching fire&lt;/a&gt; &lt;a href="https://www.msn.com/en-us/news/us/sac-metro-fire-challenged-by-burning-tesla/ar-AAYnuYV"&gt;every&lt;/a&gt; &lt;a href="https://www.msn.com/en-us/autos/news/nhtsa-steps-up-tesla-investigation-of-phantom-braking-crashes-into-emergency-vehicles/ar-AAYhkQk"&gt;now&lt;/a&gt; &lt;a href="https://fox2now.com/news/illinois/tesla-catches-fire-on-route-3-in-brooklyn-illinois/"&gt;and then&lt;/a&gt;, despite &lt;a href="https://www.thedrive.com/news/38579/these-repair-bulletins-for-teslas-quality-problems-are-downright-embarrassing-and-serious"&gt;bizarre QC issues&lt;/a&gt;, despite its &lt;a href="https://www.truthorfiction.com/did-elon-musk-tweet-we-will-coup-whoever-we-want-deal-with-it/"&gt;nitwit CEO&lt;/a&gt;, still they are seen as cool and fashionable and trendy.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;EVs are just an incremental improvement on cars. This painful reality hit me when I first &lt;em&gt;heard&lt;/em&gt; an EV whooshing down the street: I couldn’t really tell it apart from any other vehicle. Over the years I had read so many hyped articles about how EVs were so quiet that they needed artificial sounds to warn pedestrians that I expected nothing less than library-level quietness from an EV. Instead I heard the same deafening roar as any other car.&lt;/p&gt;

&lt;p&gt;It turns out that if you put a tonne of metal on rubber tires going on asphalt, that rubber-on-surface sound is likely the dominant noise source at any appreciable speed:&lt;/p&gt;

&lt;blockquote&gt;"Tire-pavement interaction noise (TPIN) dominates for passenger vehicles with the speed of above 40 km/h and for trucks with the speed of 70 km/h."&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://www.researchgate.net/publication/328012268_Literature_review_of_tire-pavement_interaction_noise_and_reduction_approaches"&gt;Literature review of tire-pavement interaction noise and reduction approaches, Tan Li, 2018&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As speed increases, it quickly doesn’t matter if you even have an engine at all, as aerodynamic noise also factors in:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2022/car-noise.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2022/car-noise.png" alt="Chart with noise sources of cars by speed. At 15mph or so, propulsion noise gives way to tire-pavement noise as the largest source."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/car-noise.png" alt="Chart with noise sources of cars by speed. At 15mph or so, propulsion noise gives way to tire-pavement noise as the largest source."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Past 15mph or so, propulsion noise is no longer the largest noise source.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;So the sound will be the same. So will other things: the parking space it requires is the same, the urban sprawl it stimulates is the same, the accidents are the same (&lt;a href="https://jalopnik.com/teslas-navigate-is-worse-than-human-driving-consumer-r-1834944173"&gt;or worse&lt;/a&gt;). Everything that matters is basically the same.&lt;/p&gt;

&lt;p&gt;For all the &lt;a href="https://thedriven.io/2021/12/21/tesla-model-3-and-model-y-get-dancing-lights-in-2021-holiday-update/"&gt;distracting “features”&lt;/a&gt; of these high-tech gizmos, in essence &lt;em&gt;they are still just cars&lt;/em&gt;. No matter how much high tech is embedded into them, they are ontologically the same as the first Model T.&lt;/p&gt;

&lt;p&gt;The most obvious improvement of EVs is in energy efficiency/pollution. Ironically this seems to be a very old pro-car argument. In &lt;a href="https://www.goodreads.com/book/show/30833.The_Death_and_Life_of_Great_American_Cities"&gt;&lt;em&gt;The Death and Life of Great American Cities&lt;/em&gt;&lt;/a&gt;, written over half a century ago, Jane Jacobs notes that early car proponents defended the personal vehicle as &lt;em&gt;cleaner&lt;/em&gt; than its predecessor – horses. Internal combustion engines don’t poop, so the streets were in fact cleaner than before. That is all fair and just; she argued that the issue, however, was that horses were being replaced with &lt;em&gt;far too many&lt;/em&gt; cars – in other words, the one-car-per-person model of North America. Essentially the same argument about cleanliness is being repeated now, a century later, with EVs.&lt;/p&gt;

&lt;p&gt;Pollution spewing from combustion engines, although a serious issue, was never the only nor the greatest problem caused by cars (and EVs &lt;a href="https://www.euronews.com/green/2022/02/01/south-america-s-lithium-fields-reveal-the-dark-side-of-our-electric-future"&gt;still generate plenty pollution&lt;/a&gt;, just not inside the engine, but in power plants and factories). It is disingenuous to pretend otherwise.&lt;/p&gt;

&lt;p&gt;The rise of EVs is so disheartening because it is a huge missed opportunity and waste of resources. Even more so because it is being &lt;a href="https://www.cnn.com/2021/09/08/business/biden-uaw-electric-vehicles-climate/index.html"&gt;pushed by&lt;/a&gt; and within rich Western economies, that tend to lead the way to the rest of the world. Climate change, failing cities and fossil fuel scarcity could have catalyzed a new era of major public transit infrastructure projects and a shift in zoning practices towards sane densification. But those things are hard – culturally and politically – and people will do basically anything to avoid having to do them.&lt;/p&gt;

&lt;p&gt;EVs are the perfect kludge that enables us to do nothing. People get a clean conscience thinking they are “doing something”, while not really addressing the underlying issue (and &lt;a href="https://www.instituteforenergyresearch.org/renewable/the-environmental-impact-of-lithium-batteries/"&gt;creating some brand new problems&lt;/a&gt; as well). &lt;a href="https://bc.ctvnews.ca/vancouver-residents-rally-against-broadway-plan-1.5893686"&gt;Selfish NIMBYism&lt;/a&gt; and infinite sprawl can carry on unbothered.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2022-04-13:/blog/2022/04/digital_nomads.html</id>
    <title type="html">Are "digital nomad visas" a thing yet?</title>
    <published>2022-04-13T08:00:00Z</published>
    <updated>2022-04-13T08:00:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2022/04/digital_nomads.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2022/04/digital_nomads.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2022/cloud_opt.jpg" alt="A foggy morning in Coquitlam, Canada."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/cloud_opt.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Immigration sucks. In addition to the personal toll it takes on anyone, it is also mind-numbingly tedious and baroquely complex. Why aren’t things &lt;strong&gt;better&lt;/strong&gt; by now?&lt;/p&gt;

&lt;p&gt;This reminded me of the so-called “digital nomad visas”. Searching for that term will get you a thousand clickbaitey Wordpress sites with the “20 best countries with nomad visas” or whatever. But how real are they &lt;em&gt;really&lt;/em&gt;?&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;I’ll admit the term sounds pretty cool. It sounds like something you’ll be doing on your phone, as opposed to over the hundreds of PDF files and scanned documents a normal application will demand.&lt;/p&gt;

&lt;p&gt;In fact, the name is so enticing I’m pretty sure &lt;strong&gt;that’s the whole point&lt;/strong&gt;. It is so radically opposite to idea of traditional visas that people can’t help but think that &lt;em&gt;they are&lt;/em&gt; opposites.&lt;/p&gt;

&lt;p&gt;The “digital nomad” part leads one to believe that the stamp is somehow catered towards tech workers with remote jobs; thus, being directed at that demographic, it makes sense to assume that the visa has the characteristics that make it &lt;em&gt;more desireable to them&lt;/em&gt; than traditional visas – otherwise, what is the point of these visas? In short, I think this is what most people tend to think when meeting with the term for the first time:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;traditional visa&lt;/th&gt;
      &lt;th&gt;digital nomad visa&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Requirements&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Many&lt;/td&gt;
      &lt;td&gt;Few&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Application process&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Hard, time-consuming, complex, lots of paper documents and legalese&lt;/td&gt;
      &lt;td&gt;Easy, fast, simple, lots of e-documents&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Time&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Measured in aeons&lt;/td&gt;
      &lt;td&gt;Measured in days&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Path to full residency&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Tortuous&lt;/td&gt;
      &lt;td&gt;Streamlined&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Uniqueness&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Specific to each country&lt;/td&gt;
      &lt;td&gt;Same/similar between countries&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Time limits&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Constrained&lt;/td&gt;
      &lt;td&gt;Unconstrained&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Coolness&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Minivan heading to football practice&lt;/td&gt;
      &lt;td&gt;Convertible doing doughnuts&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;What people think is going on ☝️&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What really goes on is that these digital thingies are almost always just a rebranding of old the same old temporary visitor visas. Now this is where things get interesting: &lt;strong&gt;who is advertising&lt;/strong&gt; these visas as “digital nomad visas”? At first I assumed governments were doing the rebranding, but that is not always the case. There are some countries that do use the specific wording “digital nomad” when describing these visas, like &lt;a href="https://home.kpmg/xx/en/home/insights/2021/09/flash-alert-2021-240.html"&gt;Greece’s Law 4825/2021&lt;/a&gt; and more famously &lt;a href="https://www.e-resident.gov.ee/nomadvisa/"&gt;Estonia&lt;/a&gt;; however, in most cases most of the publicity seems to come from elsewhere.&lt;/p&gt;

&lt;p&gt;For instance, take the &lt;a href="https://www.vfsglobal.com/portugal/Brazil/pdf/D7.pdf"&gt;Portuguese D7 visa&lt;/a&gt;, which is very specifically meant for members of religious orders, retirees and people with significant passive income, but is touted as a “digital nomad visa”:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2022/portugal-d7-form.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2022/portugal-d7-form.jpg" alt="PDF form saying that this visa is meant for retirees and members of religious orders."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/portugal-d7-form.jpg" alt="PDF form saying that this visa is meant for retirees and members of religious orders."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Official D7 requisition form. It literally says it is meant for retirees, members of religious orders and people living off passive income.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Now if you search for “portugal digital nomad visa”, guess which visa you are lead to believe is tailored for, well… digital nomads?&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2022/portugal-d7.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2022/portugal-d7.jpg" alt="Search results for 'digital nomad visa portugal' showing the D7 visa in."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2022/portugal-d7.jpg" alt="Search results for 'digital nomad visa portugal' showing the D7 visa in."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I’m not saying that the people above that are connecting “digital nomad” to the D7 visa are wrong in any way – they might be totally correct. In fact, among the search results there are so many law firms, consultancies, blogs and vlogs selling the D7 as exactly that that they are probably right. Have they found a loophole? Am I missing something – perhaps all remote workers are really nuns and priests in disguise? Do I just suck at googling and missed something obvious?&lt;/p&gt;

&lt;p&gt;Be that as it may, one thing I would love to see is how many people successfully live as digital nomads with that visa.&lt;/p&gt;

&lt;p&gt;Anyway, my point is that the &lt;strong&gt;publicity&lt;/strong&gt; linking that visa to digital nomadism is coming from those &lt;em&gt;very interested parties&lt;/em&gt;, and &lt;em&gt;not&lt;/em&gt; the government of Portugal. In short, they have skin in the game, and you can bet they are making money off of that connection.&lt;/p&gt;

&lt;p&gt;I bet if someone investigated other countries touted as having “digital nomad visas” they would find similar results.&lt;/p&gt;

&lt;p&gt;Back to the original question, when are these visas going to be a thing?&lt;/p&gt;

&lt;p&gt;In a sense they already are, because these are old visas under new guises – be it the government or third parties doing the rebranding. Now the &lt;em&gt;idea&lt;/em&gt; we have of how they ought to be – the happy second column in the table above – that’s something else, and I can’t see it becoming a thing, ever.&lt;/p&gt;

&lt;p&gt;No matter what shiny wrapping you put around immigration, it is still immigration. Countries that have painful processes have them for a reason – put simply there are more people willing to go through the process than they need, so they can be picky. That fundamental reality isn’t going to change just because we have this new expectation due to this shiny new term.&lt;/p&gt;

&lt;p&gt;All countries have the same basic incentive for getting more of these “digital nomads”: high salaries, which means more taxes and consumption. How important that might be varies between countries, which explains the list of countries that have some kind of “digital nomad” visa – the larger world economies are usually not on those lists, and when some of them eventually are, the requirements are so stringent that they’re not really any different from normal temporary work or rich-person visa.&lt;/p&gt;

&lt;p&gt;The closest thing I’ve seen to a “true” digital nomad visa is &lt;a href="https://www.e-resident.gov.ee/nomadvisa/"&gt;Estonia’s&lt;/a&gt;. They seem truly committed to the same ideals we described, and the process seems fairly straightforward. Its the exception that confirms the rule, sadly.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2021-12-30:/blog/2021/12/botched_interviews.html</id>
    <title type="html">Botched interviews</title>
    <published>2021-12-30T12:34:36Z</published>
    <updated>2021-12-30T12:34:36Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2021/12/botched_interviews.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2021/12/botched_interviews.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2021/puerto-varas-sm.jpg" alt="Sunset in Puerto Varas."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/puerto-varas-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Here’s something I’ve been wanting to write for a while: all the times (the ones I can remember, anyway) I bombed a software engineer job interview. There are so many “how I aced interviewing at X”/”how to pass X interview” floating around that I thought the opposite story would make for an amusing read.&lt;/p&gt;

&lt;p&gt;My first developer job was as an intern at a big tech company in 2012. I think that was one of the worst interviews I’ve had, by the way – I could barely understand the interviewer over the cellphone, and those were the days of “how many piano players are there in New York”-kind of questions. I thought it went terrible, but I got the job somehow. On the other hand I’ve had many interviews I thought I did great but bombed anyway.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id="faang-1-2013"&gt;FAANG 1 (2013)&lt;/h2&gt;

&lt;p&gt;I was just out of school when I got a cold call from a FAANG recruiter asking if I was interested in interviewing there. Needless to say I was naive and didn’t quite know what I was getting myself into.&lt;/p&gt;

&lt;p&gt;The first part of the process was a phone screen with a technical recruiter. She asked me something like “What is the fastest way to sum two 32-bit integers?”. I froze like a deer in the headlights.&lt;/p&gt;

&lt;p&gt;After gasping in awe at the bizarre question and mumbling some nonsense, I was informed that my answer was &lt;em&gt;not&lt;/em&gt; correct. The &lt;em&gt;right&lt;/em&gt; answer, the recruiter said, was “using the CPU’s TLB”. The &lt;a href="https://en.wikipedia.org/wiki/Translation_lookaside_buffer"&gt;translation lookaside buffer&lt;/a&gt; is a memory cache located between the CPU and the CPU cache. I still had college classes in my somewhat-recent memory at the time, so I kind of knew that this thing existed, but to this day I still don’t know how to sum two integers with it.&lt;/p&gt;

&lt;h2 id="faang-1-2014"&gt;FAANG 1 (2014)&lt;/h2&gt;

&lt;p&gt;A year passed and (the same) FAANG came to my town with a recruitment event. Again I got a call, and instead of a phone screening, I would go straight to the event location and do a quick onsite interview.&lt;/p&gt;

&lt;p&gt;They provided recommendations on technical subjects I should refresh my memory about: basically Algorithms 101 syllabus; sorting algorithms, red/black and AVL trees, A* and Dijkstra, NP-complete problems, etc, as well as some operating systems topics: processes, threads, mutexes, scheduling algorithms and so on.&lt;/p&gt;

&lt;p&gt;At the time I had just started grad school. I was a bit more seasoned than the last interview, but far from having any relevant industry experience.&lt;/p&gt;

&lt;p&gt;Interview day. I got to the venue and sat reading my notes on how to balance AVL trees. The interviewers showed up, greeted me and got things started. They gave me pen and paper and asked me how to some things on a list of integers. I don’t recall the interview being particularly bad or anything, but round one was the end of the line for me. A few days later I got a boilerplate rejection email and that was my last contact with this FAANG.&lt;/p&gt;

&lt;h2 id="mid-sized-tech-2014"&gt;Mid-sized tech (2014)&lt;/h2&gt;

&lt;p&gt;Grad school classes were few and far apart, so I decided to start looking for a job. This mid-sized tech company had a local office, so I got in touch and scheduled an interview.&lt;/p&gt;

&lt;p&gt;I don’t remember any meaningful details from this interview. One thing I do remember is being asked what monthly compensation I expected. The interviewer passed me a scrap of paper and a pen for me to write the number down. I took a few moments to think and wrote down what I thought was an adequate number. In today’s US dollars, that number would be enough to afford a parking spot in San Francisco, but it was an okay salary for a junior hire in my town.&lt;/p&gt;

&lt;p&gt;I didn’t get a lot of feedback here other than “we went with someone else”.&lt;/p&gt;

&lt;h2 id="faang-2-2019"&gt;FAANG 2 (2019)&lt;/h2&gt;

&lt;p&gt;A few years had passed since my last failure. I had finished my education, become a Ruby developer and enjoyed a 3.5-years tenure at a great, small local software studio. I had a preferred text editor. I had dotfiles. I felt weathered. So I did what you’re supposed to do: I applied to FAANG.&lt;/p&gt;

&lt;p&gt;FAANG responded to my application, and after a couple of &lt;em&gt;months&lt;/em&gt; and being ghosted by one of the 5+ recruiters involved in the process, things got on track for the onsite.&lt;/p&gt;

&lt;p&gt;I did the Leetcode thing daily. I read Glassdoor tips and talked to college friends that worked at this company. I even went on Blind and found out that you’re basically an idiot if you don’t pass FAANG’s interview, cause it’s so damn easy.&lt;/p&gt;

&lt;p&gt;I passed the initial screening rituals and was invited for an onsite – 25 hours and 3 flights away. As I obsessively went through my notes in the hotel, I thought I was finally &lt;em&gt;ready&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;There were maybe 5 or 6 rounds, each with one or two interviewers, all very nice and moderately helpful. Pretty much textbook FAANG interview, just like CTCI describes it. I was asked a particularly difficult set of questions. Mid-interview, I got the familiar feeling that a train is steaming towards me and I’ll soon be smashed into smithereens. Looking back, I’d evaluate myself at this interview as Not Good.&lt;/p&gt;

&lt;p&gt;Another 25 hours, 2-stop travel back to my town. Feedback came swiftly in the familiar lukewarm rejection phone call.&lt;/p&gt;

&lt;h2 id="big-tech-2019"&gt;Big Tech (2019)&lt;/h2&gt;

&lt;p&gt;This Big Tech company is highly respected in the Ruby community and their culture seemed to align with my own. I tried, and failed, their interview process two times.&lt;/p&gt;

&lt;p&gt;They have a fairly straightforward interview process: first a phone screen/short code challenge, then a longer behavioral/technical challenge, typically onsite. First time, I didn’t make it to the onsite.&lt;/p&gt;

&lt;p&gt;My second attempt was much smoother and lead to the onsite. Like &lt;em&gt;FAANG 1 (2019)&lt;/em&gt;, this involved multiple flights and 20+ hours of travel. Also like my previous interview, I &lt;em&gt;felt ready&lt;/em&gt;. The recruiter was great, and every person I met so far was extremely nice. Company culture seemed fantastic and I liked the tech stack.&lt;/p&gt;

&lt;p&gt;There were two technical rounds, one cultural fit conversation and one technical-but-not-coding round. The coding parts went well, maybe a B+. The culture fit thing was very good. The not-coding part, ironically the one I had prepared the most, was a disaster, although I didn’t see things that way at the time.&lt;/p&gt;

&lt;p&gt;I came prepared to talk about one of the projects I lead in my current job at the time; evidently I had an NDA in place and had to navigate around it. I thought this was fine – I had already published a post on the same subject on the company’s public blog and never had any complaints about it being too esoteric/abstract. The interviewer was not amused by this at all. Because of the vagueness of the language I was using, he seemed to think I was describing something shady. At one point, he actually asked something like “do your users know you are doing this”! Right now I think that was kind of funny, but I was utterly bewildered at the time. I tried to reassure him that there was nothing fishy going on, but at that point he had probably made his mind. I might as well have gone straight to the airport and saved everyone some time.&lt;/p&gt;

&lt;p&gt;Rejection call came a week later. Upon my request, the recruiter followed with a very thorough email detailing the reasons of the rejection, which is a fairly unusual thing for these companies to do, and very helpful for the candidate. Although I think the interviewer could have handled the situation better (just ask me to describe another project), I have great respect for the way the company handled the process and gave honest feedback.&lt;/p&gt;

&lt;h2 id="the-printer-in-the-room"&gt;The printer in the room&lt;/h2&gt;

&lt;p&gt;Hiring is the printer of software engineering jobs. It kind of works, but not very well, and everyone seems to agree it should be better at this point. This is in no way a demerit to recruiters – they’re doing their job and are not at fault here. They’re usually pretty good; its the framework that isn’t great. There have been some incremental improvements: code sharing platforms are pretty good, which makes remote interviewing very straightforward (and reduces the need for onsites, &lt;a href="https://lbrito1.github.io/blog/2021/08/onsites.html"&gt;which suck&lt;/a&gt;). There are many services where you build a single profile and apply to many companies at once, which reduces the time waste of filling the same forms in all the different companies’ websites. The bulk of the process remains more or less the same though.&lt;/p&gt;

&lt;p&gt;Interviewing is in part a numbers game, but also not &lt;em&gt;entirely&lt;/em&gt; random, which means there is a way to get better at it (that’s the whole point of companies like Leetcode and books like CTCI). Failing an interview you prepared for leaves a sour taste in the mouth, but over time it gets easier to accept as just part of the probability game.&lt;/p&gt;

</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2021-10-07:/blog/2021/09/job_offers_pandemic.html</id>
    <title type="html">Analyzing LinkedIn's data export: what happened in 2021?</title>
    <published>2021-10-07T14:45:00Z</published>
    <updated>2021-10-07T14:45:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2021/09/job_offers_pandemic.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2021/09/job_offers_pandemic.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2021/linkedin-wordcloud.png" alt="Bar chart showing distribution of jobs I applied to per country. US ranks first with over 10 applications."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/linkedin-wordcloud.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I’ve been using LinkedIn basically since I started working as an intern back in 2012. My usage is mostly limited to posting my blog posts, except the couple of times I used the platform to search for a new job. So most of the time, LinkedIn has been pretty slow-paced, with maybe half a dozen random recruiters reaching out per year.&lt;/p&gt;

&lt;p&gt;However, since the Covid-19 pandemic started, and particularly in 2021, things seem to have gone a little crazy, with a &lt;em&gt;lot&lt;/em&gt; more recruiter activity. I was curious to see just how much things had changed, so I looked at LinkedIn’s data export.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;First I requested my data from LinkedIn:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/linkedin-request.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/linkedin-request.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/linkedin-request.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Messages, Connections and Invitations seem like the most promising sources of data:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;➜  Basic_LinkedInDataExport_10-01-2021 &lt;span class="nb"&gt;ls&lt;/span&gt; &lt;span class="nt"&gt;-lahtS&lt;/span&gt;
total 1020K
&lt;span class="nt"&gt;-rw-rw-r--&lt;/span&gt; 1 leo leo 577K out  1 13:06  messages.csv
&lt;span class="nt"&gt;-rw-rw-r--&lt;/span&gt; 1 leo leo 146K out  1 13:05  Connections.csv
&lt;span class="nt"&gt;-rw-rw-r--&lt;/span&gt; 1 leo leo 113K out  1 13:05  Contacts.csv
&lt;span class="nt"&gt;-rw-rw-r--&lt;/span&gt; 1 leo leo  43K out  1 13:05  Learning.csv
&lt;span class="nt"&gt;-rw-rw-r--&lt;/span&gt; 1 leo leo  23K out  1 13:05  Invitations.csv&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The Connections export is somewhat limited for our purposes: I only actively add people on LinkedIn during a job search.&lt;/p&gt;

&lt;p&gt;Messages are a bit more interesting because a lot of recruiters immediately offer a position in their first contact (sometimes even with a pre-scheduled Google calendar event! I wish things were this straightforward back when I was finishing school).&lt;/p&gt;

&lt;p&gt;Invites are also a good source, complimentary to Messages. After accepting or rejecting an invite, the Invitation is deleted, so there’s no danger of double counting an interaction that started as Invitation and then evolved to Messaging.&lt;/p&gt;

&lt;p&gt;Focusing first on the Messages export, here are some relevant info we might aspire to extract:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Job offers (as in “I have a job I want you to apply for”) per date&lt;/li&gt;
  &lt;li&gt;Keywords mentioned in messages (“Ruby”, “Rails” etc)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Let’s see if we can extract those.&lt;/p&gt;

&lt;h2 id="job-offers-per-month"&gt;Job offers per month&lt;/h2&gt;

&lt;p&gt;Job offers mainly come from messages, and the bulk of my messages come from recruiters. However, I do get a few scattered personal messaging from old acquaintances, some professional but not interview-related conversations, etc.&lt;/p&gt;

&lt;p&gt;A simple approach to estimate how many messages are actually from someone promoting a job opening is to look for certain job-related terms: in my case, as a Ruby engineer, if a message contains “Ruby” it is probably from a recruiter advertising a Ruby-related position. This is only an estimate: maybe I chatted about Ruby at some point with an acquaintance, which of course is non-related to our objective here. Those cases are few and far apart compared to the recruiter conversations though.&lt;/p&gt;

&lt;p&gt;With that in mind, I built a list of terms that are related to job searches:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-ruby"&gt;&lt;span class="n"&gt;job&lt;/span&gt; &lt;span class="n"&gt;offer&lt;/span&gt; &lt;span class="n"&gt;opportunity&lt;/span&gt; &lt;span class="n"&gt;ruby&lt;/span&gt; &lt;span class="n"&gt;developer&lt;/span&gt; &lt;span class="n"&gt;engineer&lt;/span&gt; &lt;span class="n"&gt;talent&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="n"&gt;relocation&lt;/span&gt; &lt;span class="n"&gt;position&lt;/span&gt; &lt;span class="n"&gt;role&lt;/span&gt; &lt;span class="n"&gt;recruiter&lt;/span&gt; &lt;span class="n"&gt;talent&lt;/span&gt; &lt;span class="n"&gt;looking&lt;/span&gt; &lt;span class="n"&gt;interested&lt;/span&gt; &lt;span class="n"&gt;oportunidade&lt;/span&gt; &lt;span class="n"&gt;trabalho&lt;/span&gt; &lt;span class="n"&gt;vaga&lt;/span&gt; &lt;span class="n"&gt;software&lt;/span&gt; &lt;span class="n"&gt;experience&lt;/span&gt; &lt;span class="n"&gt;tech&lt;/span&gt; &lt;span class="n"&gt;rails&lt;/span&gt; &lt;span class="n"&gt;interesse&lt;/span&gt; &lt;span class="n"&gt;interested&lt;/span&gt; &lt;span class="n"&gt;company&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="n"&gt;work&lt;/span&gt; &lt;span class="n"&gt;senior&lt;/span&gt; &lt;span class="n"&gt;contato&lt;/span&gt; &lt;span class="n"&gt;vagas&lt;/span&gt; &lt;span class="n"&gt;remote&lt;/span&gt; &lt;span class="n"&gt;working&lt;/span&gt; &lt;span class="n"&gt;stack&lt;/span&gt; &lt;span class="n"&gt;backend&lt;/span&gt; &lt;span class="n"&gt;technical&lt;/span&gt; &lt;span class="n"&gt;developers&lt;/span&gt; &lt;span class="n"&gt;skill&lt;/span&gt; &lt;span class="n"&gt;skills&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Most of the messaging I get is in English, but I do get a significant amount of contacts in Portuguese as well, so we have terms in both languages.&lt;/p&gt;

&lt;p&gt;With that list of terms, we can simply &lt;code&gt;select&lt;/code&gt; all the relevant ones and group those by month:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-ruby"&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;job_messages_per_month&lt;/span&gt;
    &lt;span class="n"&gt;job_related_messages&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="vi"&gt;@input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;select&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"CONTENT"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=~&lt;/span&gt; &lt;span class="sr"&gt;/&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="vi"&gt;@relevant_words&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"|"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sr"&gt;/i&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;metric_per_month&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job_related_messages&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"DATE"&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;&lt;span class="nf"&gt;to_date&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now, when I’m not actively looking for another job, I tend not do look at LinkedIn too much, so the Invitations tend to pile up. As already mentioned, accepted/rejected invites get “deleted” from LinkedIn’s data export (which doesn’t seem like a great practice IMO, as they probably still have that data), so only invites that you haven’t acted on either way are available in the CSV export.&lt;/p&gt;

&lt;p&gt;Just like with messages, we group the relevant invites (“Inbound”, meaning someone is adding you as opposed to “Outbound” where you’re adding someone) by date. I didn’t bother filtering by terms because nearly everyone that adds me is a recruiter these days:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-ruby"&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;recruiters_per_month&lt;/span&gt;
    &lt;span class="n"&gt;received_invites&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="vi"&gt;@input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;select&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"Direction"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;"INCOMING"&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;metric_per_month&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;received_invites&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;strptime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"Sent At"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s2"&gt;"%m/%d/%y"&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;to_date&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here’s the result of summing both data, messages and invites:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/linkedin-offers-month.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/linkedin-offers-month.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/linkedin-offers-month.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;There was a spike in early 2019, when I actively pursued a new job. I also gave a &lt;a href="http://www.thedevelopersconference.com.br/tdc/2019/florianopolis/trilha-web-frontend"&gt;conference talk&lt;/a&gt; at that time and added a bunch of people on LinkedIn. Thus, this peak in job offers is just a consequence of me actively looking for a job. After that, activity dropped to back to lower levels (I also ticked “not looking for a job” on LinkedIn right after I signed the offer at my new job around April 2019).&lt;/p&gt;

&lt;p&gt;On the other hand, since late 2020 job offer messaging has grown steadily. I wasn’t actively looking, so this here is organic growth. I’m curious to see if other people also had a similar pattern. Perhaps this is a reflection of an increase of demand in some specific skillset (Ruby) or experience level (X years of experience), but I’m guessing its part of a general upwards trend in the industry since the beginning of the pandemic.&lt;/p&gt;

&lt;h2 id="most-common-terms"&gt;Most common terms&lt;/h2&gt;

&lt;p&gt;Another interesting piece of information is the most common words mentioned in the conversations.&lt;/p&gt;

&lt;p&gt;We could just count how frequently each word pops up, but irrelevant words like “the”, “a” and so on would rank in the top. So first we need to get rid of those words, then look at the linted text. I’m sure there’s an API that does just that somewhere out there, but I created my own list of non-relevant words manually and used that instead.&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-ruby"&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;word_frequencies&lt;/span&gt;
    &lt;span class="n"&gt;full_text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="vi"&gt;@input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;map&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"CONTENT"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}.&lt;/span&gt;&lt;span class="nf"&gt;compact&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;" "&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;normalize_words&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;full_text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/\s+/&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
      &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;map&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;gsub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/[^a-z]+/&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;reject&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;size&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="vi"&gt;@nonrelevant_words&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;include?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;group_count&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;sort_by&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}.&lt;/span&gt;&lt;span class="nf"&gt;reverse&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Using the &lt;a href="https://github.com/zverok/magic_cloud"&gt;MagicCloud&lt;/a&gt; gem, here’s the plotted results:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/linkedin-wordcloud.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/linkedin-wordcloud.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/linkedin-wordcloud.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;No surprises there – terms like “Ruby” and “Rails” are among the most frequent. Other bland job-related terms compose the bulk of the word cloud.&lt;/p&gt;

&lt;p&gt;Here are the actual numbers for these terms:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/linkedin-terms.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/linkedin-terms.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/linkedin-terms.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;h2 id="what-happenedis-happening"&gt;What happened/is happening?&lt;/h2&gt;

&lt;p&gt;Going back to the original question: what happened in 2021? Did software-related job offers explode during the pandemic? My anecdata points to an obvious Yes. Most articles discussing this question are just opinion pieces around the lines of “engineering demand increased because digital services sharply expanded with the lockdowns”. I couldn’t find any hard data supporting these assumptions (other than this personal analysis presented above).&lt;/p&gt;

&lt;p&gt;One of the major impacts of the pandemic, being forced to remote-only did have pretty obvious effects in non-US job markets. Before the pandemic, I suspect that many very competent people were hesitant to leave their jobs due to strictly non-remote perks: nice offices, work colleagues, local benefits like healthcare, maybe even specific labor laws regarding vacation time and so on.&lt;/p&gt;

&lt;p&gt;Remote jobs based in strong currency countries, especially the US, were already “a thing” long before the pandemic, but with remote work being mandatory rather than an option, local remote vs foreign remote boils down to a huge pay gap in most cases, with US-based software engineering salaries being hard to compete with anywhere else in the world.&lt;/p&gt;

&lt;p&gt;I’m very curious to see how this pans out for local software shops. These local companies are really bleeding talent leaving for stronger currencies; if these dynamics go on for too long, I can’t see how most of them will last.&lt;/p&gt;

&lt;h2 id="code"&gt;Code&lt;/h2&gt;

&lt;p&gt;&lt;a href="https://github.com/lbrito1/LinkedIn-insights"&gt;Here’s the repo&lt;/a&gt; with all the scripts needed to reproduce these results.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2021-08-27:/blog/2021/08/onsites.html</id>
    <title type="html">Onsites considered harmful</title>
    <published>2021-08-27T21:33:00Z</published>
    <updated>2021-08-27T21:33:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2021/08/onsites.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2021/08/onsites.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2021/onsite-sm.jpg" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/onsite-sm.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;A couple of years ago I interviewed at one of the largest Ruby shops out there. Screening went well, and some days later I was invited for an onsite.&lt;/p&gt;

&lt;p&gt;These were the good old pre-covid days, so an onsite really meant &lt;em&gt;onsite&lt;/em&gt;. You had to travel to the office, wherever that was.&lt;/p&gt;

&lt;p&gt;The thing is, an onsite is actually radically different depending on &lt;em&gt;where you live&lt;/em&gt;. It follows that onsites introduce further bias into our industry’s already problematic hiring process. I’d like to argue that although onsites have some advantages, they’re mostly a waste of time (and money).&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;If you’re a local, an onsite probably means taking a bus, metro, taxi, walking, whatever. If you’re not local but are at least within the same country that you’re interviewing, it might take a day trip or maybe a short flight. If you’re a foreigner it might take travel visas and a week of travel.&lt;/p&gt;

&lt;p&gt;Without getting too philosophical, we all know we have a limited amount of sand grains in our hourglass. &lt;a href="https://www.wikiwand.com/en/Sunk_cost"&gt;Fallacies apart&lt;/a&gt;, anyone can &lt;em&gt;feel&lt;/em&gt; that the more we pour into something – be it renovating a kitchen or traveling for an onsite – the higher the stakes become.&lt;/p&gt;

&lt;p&gt;Its glaringly obvious that someone who invested a 30 minute bus ride to an onsite will be much more at ease than someone who flew godless hours on a red-eye. It doesn’t really matter how much pampering the latter is treated with: exquisite hotels, meal allowances… investing a week of your time will always drive up anxiety a lot more than taking an afternoon off work.&lt;/p&gt;

&lt;p&gt;Back to my story: I was interviewing for a company overseas. I happened to have a valid visa for that country, which already puts me in some advantage compared to others. Physically getting to the company building for the interview, however, took some effort: I drove to the local airport, where I arrived &lt;a href="https://www.theonion.com/dad-suggests-arriving-at-airport-14-hours-early-1819573933"&gt;more than a couple of hours early&lt;/a&gt;, flew down to São Paulo, then took two more flights until I reached my final destination, some &lt;em&gt;thirty hours&lt;/em&gt; after I stepped out of my house, then I took another cab to the fancy hotel booked by my not-to-be future company and collapsed for the night.&lt;/p&gt;

&lt;p&gt;Next day I had the onsite (which took basically the full business hours), then back to the hotel, collapsed again. On the third day I backtracked through the 30 hours of cabs, airports and flights back home. This was late December, by the way, so airports were &lt;em&gt;packed&lt;/em&gt;. A couple of days later, on Christmas eve, I got a very thoughtful &lt;em&gt;happy holidays + no thanks&lt;/em&gt; call from the recruiter.&lt;/p&gt;

&lt;p&gt;Might I have gotten the job if I had taken a bus instead of multiple planes? Maybe, maybe not (probably not, since someone in the interview panel just didn’t enjoy my parlance).&lt;/p&gt;

&lt;p&gt;That isn’t really the point, though, and as far as &lt;em&gt;anecdata&lt;/em&gt; goes, I have the opposite story as well: I interviewed twice at the same company, once through a tortuous voyage similar to the one I described above, and another time at my city, with the roles reversed: I left my house and drove for a few minutes to the onsite, while the interviewers were enjoying a fancy beachside hotel after several plane trips. I failed the former and got an offer from the latter. I’m the same person applying for the same job at the same company. Did I just perform better? Did they perform “worse”? Is it all just a coincidence? Are all of these interviews meaningless hazing rituals?&lt;/p&gt;

&lt;p&gt;But I digress. Back to the matter at hand: if you think of it, the &lt;em&gt;60 hours&lt;/em&gt; of commuting alone is more than one work week (and as far as effort goes, I’m sure more goes into enduring 60 hours of planes and airports than into programming). If you factor in the actual onsite, then we’re talking about &lt;em&gt;two workweeks&lt;/em&gt; of effort put into a no-strings-attached situation. The elapsed wall time is well into a full business week.&lt;/p&gt;

&lt;p&gt;There are sensible, rational grounds for an onsite. Recruiters want to know if the candidate hates the cold and is going to churn early winter, or maybe the city is too small, or too big, or whatever random factor might make people want to run away. That said, I find it hard to believe even the most prescient can get a read on any of those thoughts rushing through the candidate (probably even the candidate can’t).&lt;/p&gt;

&lt;p&gt;In any case, are those things worth the several thousand dollars of expenses, and more importantly, are they worth excluding a possibly large pool of candidates that aren’t willing to invest a full week of their time on a process with &lt;a href="https://blog.interviewing.io/technical-interview-performance-is-kind-of-arbitrary-heres-the-data/"&gt;naturally low chances of going forward&lt;/a&gt;? At least in my opinion, those very thin pros are outshined by the very real cons like the &lt;code&gt;-8.208527&lt;/code&gt; Sun outshines my laptop screen.&lt;/p&gt;

&lt;p&gt;Now let us also remember that the success of job searches depends on arbitrary things like if everyone on the panel likes your face. We all know things shouldn’t be this way; we’re supposed to be unbiased and empathetic, but let’s face it – we humans &lt;a href="https://www.sciencedaily.com/releases/2020/07/200714101228.htm"&gt;&lt;em&gt;suck&lt;/em&gt;&lt;/a&gt; at that.&lt;/p&gt;

&lt;p&gt;Even if we consider an utopically unbiased interviewer panel, there’s still all sorts of random noise going on at an interview, like performance anxiety. No matter how great the people interviewing are, and even how great &lt;em&gt;you&lt;/em&gt; are, interviewing always has a huge degree of uncertainty:&lt;/p&gt;

&lt;blockquote&gt;"The fact that people who are overall pretty strong (e.g. mean ~= 3) can mess up technical interviews as much as 22% of the time shows that there’s definitely room for improvement in the process"&lt;a href="https://blog.interviewing.io/technical-interview-performance-is-kind-of-arbitrary-heres-the-data/"&gt;
&lt;br&gt;- Technical interview performance is kind of arbitrary. Here’s the data.&lt;/a&gt;
&lt;/blockquote&gt;

&lt;p&gt;My point is: such a volatile thing should &lt;strong&gt;never&lt;/strong&gt; have been tied to multiple plane tickets and 2-night hotel stays in a different continent in the first place.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Never&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Perhaps surprisingly, “onsites” are still a thing during the covid pandemic – they’re just remote, i.e., &lt;em&gt;not really onsites at all&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;This is immensely beneficial for everyone involved: the company won’t have to pay for expensive hotels and plane tickets, the planet won’t have to suffer the huge CO2 emissions from this ultimately unnecessary shenanigan, and the candidate won’t have to waste a week of his/her vacation time with something as ethereal as pursuing a software engineering job.&lt;/p&gt;

&lt;p&gt;Recruitment in this industry is difficult. This is widely acknowledged by all parts involved. No wonder there are so many books, videos and Discord channels about interviewing for a tech job – not to mention coding prep services, automated third-party code challenges… the list goes on.&lt;/p&gt;

&lt;p&gt;This post is specifically about onsites, but it is impossible not to mention the overall sad state of interviewing for a software engineer job. A quick survey of HN posts is enough to glimpse how people feel about this:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/hiring-1.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/hiring-1.png" alt="Search results for 'hiring is broken' on Algolia's HN search page."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/hiring-1.png" alt="Search results for 'hiring is broken' on Algolia's HN search page."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Sounds like hiring isn't in a great shape.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Inefficient and biased as it is (or, hopefully, &lt;em&gt;was&lt;/em&gt;), physical onsites are nowhere near the worst possible interviewing practice we can observe in the wild.&lt;/p&gt;

&lt;p&gt;Why interview for a job in a quiet office full of nerds if you can &lt;strong&gt;FIGHT FOR IT IN A TOURNAMENT&lt;/strong&gt; like a geek gladiator?&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/hiring-tournament.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/hiring-tournament.jpg" alt="An email from a company called BairesDev inviting me to fight for a job in a coding tournament."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/hiring-tournament.jpg" alt="An email from a company called BairesDev inviting me to fight for a job in a coding tournament."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Yikes.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Things aren’t any better on the other side of the table – finding skilled developers in 2021 is tough, even if you’re not setting up a pair programming arena for a code to the death contest.&lt;/p&gt;

&lt;p&gt;Some recruiters go a step beyond cold calling and start &lt;em&gt;cold referral calling&lt;/em&gt;, like this recruiter asking me to &lt;em&gt;pleeeeeeeeeease&lt;/em&gt; refer candidates that match their laundry list of requirements:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/hiring-pleeeeaase.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/hiring-pleeeeaase.png" alt="A recruiter message on Linkedin asking me to refer candidates, PLEEEEEEEASE."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/hiring-pleeeeaase.png" alt="A recruiter message on Linkedin asking me to refer candidates, PLEEEEEEEASE."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Pleeeeeeeeeease send me candidates that match my laundry list of skills!&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;My second point: recruitment is seriously hard for all parts involved. If we are able to, we should try to make it &lt;em&gt;easier&lt;/em&gt;, not &lt;em&gt;harder&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Onsites were a significant hassle on top of an already complicated, inefficient, time-consuming, stressful process.&lt;/p&gt;

&lt;p&gt;Although the company usually takes on most of all of the financial hit, the time and emotional load was carried by the candidate alone.&lt;/p&gt;

&lt;p&gt;Getting rid of physical onsites is &lt;em&gt;fantastic&lt;/em&gt; news for everyone – especially people interviewing, but also companies that can now cast a wider net and carry out a faster, more diverse recruitment process. And our planet will also have God-knows-how-many thousand tonnes of CO2 less to deal with each year.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2021-08-20:/blog/2021/08/efficient_resource_distribution.html</id>
    <title type="html">Efficient resource distribution</title>
    <published>2021-08-20T11:53:10Z</published>
    <updated>2021-08-20T11:53:10Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2021/08/efficient_resource_distribution.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2021/08/efficient_resource_distribution.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2021/resource-distribution.jpg" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/resource-distribution.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;TLDR&lt;/strong&gt; A simple metrics-based ranking system is good enough to decide who gets how many resources.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Computational resources – CPU time, memory usage, network traffic etc – are limited. This may be more or less of a problem depending on project/company size and so on; if you’re working on a smaller product with limited traffic, it might not be meaningful at all.&lt;/p&gt;

&lt;p&gt;Once past a certain threshold though, expenses with such resources become non-trivial and it begins to make sense to spend some time thinking about how to distribute them as efficiently as possible.&lt;/p&gt;

&lt;p&gt;Here’s the problem that got me thinking about this: at work, we had a computational resource that needed to be consumed by a large fleet of workers (think several thousand concurrent), but each &lt;em&gt;type&lt;/em&gt; of worker had different &lt;em&gt;productivity&lt;/em&gt;, and that productivity changed over time. How can we decide who gets what?&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;So the problem is: you have a set of &lt;em&gt;consumers&lt;/em&gt; that use the &lt;em&gt;same resource&lt;/em&gt;, for which you have a static budget. The consumers all solve the same problem, more or less (i.e. have the same &lt;em&gt;output&lt;/em&gt;), but come in different &lt;em&gt;types&lt;/em&gt; that have different &lt;em&gt;productivities&lt;/em&gt; (defined as &lt;em&gt;output per resource consumption&lt;/em&gt;). Additionally, although the consumer types solve the same problem, we want consumers to be as diverse as possible – we can’t just pick the best performing one and go with that.&lt;/p&gt;

&lt;p&gt;First thought that comes to mind is &lt;em&gt;this seems ordinary enough; there must be an easy, well-known solution&lt;/em&gt;. There might be, but I couldn’t find any that was simple and effective for this use case. Closest I got were &lt;a href="https://www.wikiwand.com/en/PID_controller"&gt;PID controllers&lt;/a&gt;, which solve a similar problem, but probably doesn’t solve the entire problem here (and also seems complicated).&lt;/p&gt;

&lt;p&gt;I gave the problem some thought and came up with a reasonable solution that has been working well for a year now.&lt;/p&gt;

&lt;p&gt;The problem boils down to two parts:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Consistently keeping track of productivity among the different consumer types;&lt;/li&gt;
  &lt;li&gt;Deciding how to share the resource among the consumers.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The concept that glues both parts is that of the &lt;em&gt;cycle&lt;/em&gt; – a repeating time period in which we measure productivity and distribute resources to be shared within that time frame, until the next cycle comes up and everything is recalculated.&lt;/p&gt;

&lt;p&gt;Problem 1) boils down to maintaining a time series of how much output per resource each consumer type produced during the latest cycle.&lt;/p&gt;

&lt;p&gt;Problem 2) comes almost as a corollary to the former problem: we want the best global output possible, and that can be guessed by using the productivity stats from the previous cycle. This won’t be perfect, because productivity varies over time within each consumer type, but basic &lt;a href="https://www.wikiwand.com/en/Volatility_clustering"&gt;statistical intuition&lt;/a&gt; says it will be good enough for our purposes.&lt;/p&gt;

&lt;p&gt;So the first step of solving 2) is building a &lt;em&gt;ranking of consumers by productivity&lt;/em&gt;. We want a diverse set of consumer types, though, so we can’t just pick &lt;code&gt;type #1&lt;/code&gt; and give it 100% of the resources all the time. Also, the ranking might change each cycle, and we don’t want resource distribution to be too volatile – that might become hard to monitor and debug. We want something that is somewhat smooth, stable, convergent, but at the same time that reflects changes in productivity as quickly as possible, and that delivers good global output-per-resource-consumption.&lt;/p&gt;

&lt;p&gt;We know that the top tier within the ranking probably deserves more than the the rest, while the bottom tier probably deserves less, and that is the gist of the solution to problem 2). We don’t know beforehand how each consumer will perform though, so it makes sense to start with equal resource distribution among them.&lt;/p&gt;

&lt;p&gt;Here’s the complete solution I worked out:&lt;/p&gt;

&lt;p&gt;Start the system by sharing an equal amount of resources among all consumers: let’s say every consumer has the same weight &lt;em&gt;W&lt;sub&gt;0&lt;/sub&gt;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Then, for each cycle:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Build the productivity-per-consumer-class ranking&lt;/li&gt;
  &lt;li&gt;For the top &lt;em&gt;N%&lt;/em&gt; consumers, do &lt;em&gt;W += K&lt;/em&gt; (limited to a certain maximum)&lt;/li&gt;
  &lt;li&gt;For the bottom &lt;em&gt;N%&lt;/em&gt; consumers, do &lt;em&gt;W -= K&lt;/em&gt; (limited to a certain minimum)&lt;/li&gt;
  &lt;li&gt;Translate each &lt;em&gt;W&lt;/em&gt; to a real-world resource amount (e.g. “1GB RAM” or something). This involves the weights as well as the global resource budget per time cycle, such that we guarantee we won’t exceed the static budget.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The global sum of weights is kept more or less the same because we’re summing and subtracting the same amounts each cycle (although this isn’t perfect because we have min and max values), so the system is kept fairly stable over time while also reacting quickly to changes in productivity. Also, the system is robust, and blowing up the weights store is no big deal – weights will creep back to their previous values over a short time.&lt;/p&gt;

&lt;p&gt;To finalize, here’s a chart showing the weights of different types of consumers over the last few months:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2021/grafana.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2021/grafana.jpg" alt="Dashboard showing a chart with several colored lines representing the weights of each consumer class."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2021/grafana.jpg" alt="Dashboard showing a chart with several colored lines representing the weights of each consumer class."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Consumer class weights over time.&lt;/div&gt;
  
&lt;/div&gt;

</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2020-07-06:/blog/2020/07/replacing_google_analytics_android.html</id>
    <title type="html">I replaced Google Analytics with a web server running on my phone</title>
    <published>2020-07-06T13:45:40Z</published>
    <updated>2020-07-06T13:45:40Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2020/07/replacing_google_analytics_android.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2020/07/replacing_google_analytics_android.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/simple_diagram.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/simple_diagram.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;TLDR&lt;/strong&gt; I built &lt;a href="https://github.com/lbrito1/android-analytics"&gt;android-analytics&lt;/a&gt;, a web analytics tracker running on my phone.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Say you run a blog, personal website, small-time business page or something of the sorts. Say you also want to keep an eye on how many visitors you’re getting.&lt;/p&gt;

&lt;p&gt;The first thing that most people think at this point is “Google Analytics”. It mostly works and is free. Its also hosted by Google, which makes it very easy to start using. There aren’t many competitors that bring those points to the table, so Google Analytics usually wins by WO at this point.&lt;/p&gt;

&lt;p&gt;I used to use Google Analytics to track this blog for those same reasons. But after finding out about &lt;a href="https://termux.com"&gt;Termux&lt;/a&gt; and writing &lt;a href="https://lbrito1.github.io/blog/2020/02/repurposing-android.html"&gt;this post&lt;/a&gt; about installing a web server on an Android phone, I started toying with the idea that I had this ARM-based, 2GB RAM, Linux-like device with Internet connectivity which must be more than enough for a simple webcounter-like application. After a few weeks of tinkering, here it is!&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id="table-of-contents"&gt;Table of Contents&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
&lt;a href="#motivation"&gt;Motivation&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="#why-even-keep-anything"&gt;Why even keep anything?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#and-then-there-is-the-data"&gt;And then there is the data&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#the-lack-of-competition"&gt;The (lack of) competition&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
&lt;a href="#developing-android-analytics"&gt;Developing android-analytics&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="#basis"&gt;Basis&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#first-iteration-sinatra-webapp"&gt;First iteration: Sinatra webapp&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#second-iteration-nginx-log-parser"&gt;Second iteration: Nginx log parser&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#third-iteration-adding-a-viewer"&gt;Third iteration: Adding a viewer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#fourth-iteration-adding-an-installation-script"&gt;Fourth iteration: Adding an installation script&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#final-architecture"&gt;Final architecture&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href="#conclusion"&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="motivation"&gt;Motivation&lt;/h2&gt;

&lt;h3 id="why-even-keep-anything"&gt;Why even keep anything?&lt;/h3&gt;

&lt;p&gt;Before going into this whole thing, there’s a very reasonable question to be answered: why do I even need to collect this data?&lt;/p&gt;

&lt;p&gt;The answer is simple: I really don’t, I just enjoy seeing it. Call it a &lt;a href="https://techcrunch.com/2011/07/30/vanity-metrics/"&gt;vanity metric&lt;/a&gt;, but I think its just &lt;em&gt;plain cool&lt;/em&gt; to know that someone half across the planet read something I wrote months ago (maybe it was just a crawler; I’ll take it either way).&lt;/p&gt;

&lt;p&gt;It should be no surprise, then, that Google Analytics always felt immensely overkill.&lt;/p&gt;

&lt;p&gt;Its heartwarming to know that some nerd from Bhutan read one of my posts in the wee hours of the morning, but that is pretty much all I’m interested in. I could care less about Acquisition Treemaps, Audience Cohort Analysis or Behavior Flow. I’m not making those up: they’re all real products available on Google Analytics. I have no idea of what any of those mean, yet I’m 100% sure I don’t need them.&lt;/p&gt;

&lt;div class="image-box"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/visitor_count.jpeg" target="_blank"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/visitor_count.jpeg" alt="Visitor counter from the 90s."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/visitor_count.jpeg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Visitor counter from the 90s.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;What I wanted was closer to the late 90s’ visitor count GIF above (minus the embarrassment of publicity) than to the unsightly “Intersitial online advertising network conglomerate SEO dashboard” feeling of Google Analytics:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/ga.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/ga.png" alt="Google Analytics dashboard."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/ga.png" alt="Google Analytics dashboard."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Google Analytics dashboard.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;In short, I wanted to geek out, not do advertisement arbitrage.&lt;/p&gt;

&lt;h3 id="and-then-there-is-the-data"&gt;And then there is the data&lt;/h3&gt;

&lt;p&gt;As aforementioned, Google Analytics is great, free, &lt;em&gt;and hosted by Google&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;They keep your data. I have no idea of what they do with that data, or even what exactly it is that their tracker is sending to their servers (judging from the number of articles showing how to keep the payload below the cap of 8kb, it must be a lot).&lt;/p&gt;

&lt;div class="image-box"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/ga_payload.png" target="_blank"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/ga_payload.png" alt="Google search results for 'google analytics payload size is too large'. 642,000 results."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/ga_payload.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;That's a lot of results.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Apparently they often need over 8kb per request to feed their Lovecraftian “Audience Cohort Analysis” line of products. Fair enough, but I’m pretty sure that for my purposes, a several-kb payload is effectively using a sledgehammer to kill a fly.&lt;/p&gt;

&lt;p&gt;By using Google Analytics I was willfully sending Google who-knows-what kind of data designed to build up people’s advertising profile. The page views of my blog probably didn’t help Google too much in that aspect, sure, but the principle of the whole thing still bothered me enough to do something about it.&lt;/p&gt;

&lt;h3 id="the-lack-of-competition"&gt;The (lack of) competition&lt;/h3&gt;

&lt;p&gt;There are a lot of software similar to Google Analytics out there. The most prominent is probably &lt;a href="https://matomo.org/"&gt;Matomo&lt;/a&gt;, often &lt;a href="https://hn.algolia.com/?dateRange=all&amp;amp;page=0&amp;amp;prefix=true&amp;amp;query=matomo&amp;amp;sort=byPopularity&amp;amp;type=story"&gt;posted on Hacker News&lt;/a&gt;. It is free, open source and self-hosted (with cloud offerings for a monthly fee).&lt;/p&gt;

&lt;p&gt;I would happily use Matomo, but with it comes a conundrum:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Self-hosting implies I had to have some kind of publicly accessible Linux host, which would likely not be entirely free;&lt;/li&gt;
  &lt;li&gt;Cloud-hosting comes with a subscription fee.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Those points are trivial if you’re running a lucrative business that &lt;em&gt;needs&lt;/em&gt; analytics, but paying for this service sounds ludicrous when all you want is simple visitor stats for a personal blog.&lt;/p&gt;

&lt;h2 id="developing-android-analytics"&gt;Developing android-analytics&lt;/h2&gt;

&lt;p&gt;These were the requirements I had for my tracker:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Has to run on an old Android phone I have lying around;&lt;/li&gt;
  &lt;li&gt;Has to work with Github Pages-hosted sites;&lt;/li&gt;
  &lt;li&gt;Has a per-page view count;&lt;/li&gt;
  &lt;li&gt;Nice to have: geo info.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;These requirements are deceivingly simple, as I quickly learned.&lt;/p&gt;

&lt;p&gt;Termux makes it really easy to run many kinds of software on your Android phone, and &lt;a href="https://lbrito1.github.io/blog/2020/02/repurposing-android.html"&gt;I had already tinkered&lt;/a&gt; with web servers with Termux. For something as simple as a page view, this should be pretty straightforward.&lt;/p&gt;

&lt;p&gt;I had also already registered a dynamic DNS subdomain pointing to my phone, so it was ready to accept incoming traffic from the Internet.&lt;/p&gt;

&lt;p&gt;The first major roadblock I faced was getting my Android-hosted web server to communicate with Github Pages. After a couple of days of research, I finally learned that it is basically impossible to make a request from an HTTPS website (which Github Pages is) to an HTTP address (my Dynamic DNS’s subdomain). To summarize, you can make that work, but at the cost of having the client browser do something (like actively mark a “allow mixed content” checkbox somewhere in the browser’s flags/advanced options).&lt;/p&gt;

&lt;p&gt;This lead me to the excruciating path of obtaining and using a verified SSL certificate in my Android phone with a Dynamic DNS subdomain. This took me long enough to want to write a separate &lt;a href="https://lbrito1.github.io/blog/2020/06/free_https_home_server.html"&gt;blog post&lt;/a&gt; about it. The TLDR here is that it is entirely possible to get a verified SSL cert for a Dynamic DNS subdomain – all of it entirely for free. Depending on your ISP, you’ll have different choices of SSL challenges, but if you’re able to receive TCP requests on port &lt;code&gt;443&lt;/code&gt;, it is possible to get the certificate for free.&lt;/p&gt;

&lt;p&gt;Once I figured out the SSL thing, the rest was pretty much a breeze.&lt;/p&gt;

&lt;h3 id="fundamentals"&gt;Fundamentals&lt;/h3&gt;

&lt;p&gt;I tried out a few different ideas when developing this, but the overall architecture is always the same:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;JavaScript code in my tracked page calls the Android host;&lt;/li&gt;
  &lt;li&gt;Android host saves that information in a database;&lt;/li&gt;
  &lt;li&gt;Some graphical tool is used to parse that data into something viewable (charts etc).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id="first-iteration-sinatra-webapp"&gt;First iteration: Sinatra webapp&lt;/h3&gt;

&lt;p&gt;I started with a &lt;a href="http://sinatrarb.com/"&gt;Sinatra&lt;/a&gt; webapp with a single &lt;code&gt;POST&lt;/code&gt; endpoint that would receive a request from the tracked page and immediately save it in a Postgres database. I used Nginx as a reverse-proxy that handled traffic before passing it to Sinatra.&lt;/p&gt;

&lt;p&gt;This approach had the merit of being simple to understand and reliable. Also, it worked.&lt;/p&gt;

&lt;p&gt;But after watching it work for a few days, I realized that the whole webapp part was superfluous. Nginx logs all accesses by default, and the logs contain all the information I need: what page was requested, at what time and from what IP. This lead naturally to the second iteration.&lt;/p&gt;

&lt;h3 id="second-iteration-nginx-log-parser"&gt;Second iteration: Nginx log parser&lt;/h3&gt;

&lt;p&gt;Nginx provides flexible, per-endpoint logs: logs are activated for the endpoint that I want (&lt;code&gt;/damn_fine_coffee&lt;/code&gt;) and deactivated for everything else. This is important because the Internet is full of crawlers that annoyingly hit the root path &lt;code&gt;/&lt;/code&gt;, which obviously shouldn’t count as a page view. As I learned, the web is also surprisingly full of smartypants trying to make their way into &lt;code&gt;/tp-link&lt;/code&gt;, &lt;code&gt;/admin&lt;/code&gt; and so on; I also wanted to just ignore those.&lt;/p&gt;

&lt;p&gt;The logs provided all the &lt;em&gt;data&lt;/em&gt; I needed, but I still needed to transform that &lt;em&gt;data&lt;/em&gt; into useful &lt;em&gt;information&lt;/em&gt;. I found out about &lt;a href="https://goaccess.io/"&gt;GoAccess&lt;/a&gt; on Hacker News, and, perhaps surprisingly, it worked out of the box with Termux:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/goaccess.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/goaccess.png" alt="GoAccess dashboard with my Android-hosted data."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/goaccess.png" alt="GoAccess dashboard with my Android-hosted data."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;GoAccess dashboard with my Android-hosted data.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;At this point I could settle for GoAccess, but it didn’t seem to provide any geo info, which I always thought would be a cool feature, so I kept working on my own tool.&lt;/p&gt;

&lt;p&gt;I configured Nginx to print CSV-like logs, and &lt;a href="https://github.com/lbrito1/android-analytics/blob/master/app/compiler.rb"&gt;wrote a parser&lt;/a&gt; that transforms those log entries into DB entries with geographic information provided by the excellent &lt;a href="https://github.com/alexreisner/geocoder"&gt;geocoder&lt;/a&gt; gem, and also annonymizes the request IPs using MD5 hashing. The final step was adding a cron entry to run the parser regularly.&lt;/p&gt;

&lt;p&gt;At this point I was getting regular traffic converted to rows in a Postgresql table. I still needed a more convenient way to look at the data, though.&lt;/p&gt;

&lt;h3 id="third-iteration-adding-a-viewer"&gt;Third iteration: Adding a viewer&lt;/h3&gt;

&lt;p&gt;I initially thought about using &lt;a href="https://grafana.com/"&gt;Grafana&lt;/a&gt; as a visualization tool. Its free, easy to use, flexible and I was already familiar with it. Unfortunately Grafana doesn’t have binaries available for Termux (there’s an &lt;a href="https://github.com/termux/termux-packages/issues/4801"&gt;issue&lt;/a&gt; open in Termux’s repo requesting that), and I wasn’t feeling like trying to compile it manually.&lt;/p&gt;

&lt;p&gt;Thankfully I found the &lt;a href="https://github.com/ankane/blazer"&gt;blazer&lt;/a&gt; gem, which has a very similar concept compared with Grafana: you write SQL queries and it transforms them into charts. That was exactly what I was looking for. The downside is that it requires a full-fledged Rails application to run, but I was okay with that trade-off.&lt;/p&gt;

&lt;p&gt;Here’s how the data looks like right now:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/android-analytics-screenshot.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/android-analytics-screenshot.png" alt="blazer gem dashboard."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/android-analytics-screenshot.png" alt="blazer gem dashboard."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;blazer gem dashboard.&lt;/div&gt;
  
&lt;/div&gt;

&lt;h3 id="fourth-iteration-adding-an-installation-script"&gt;Fourth iteration: Adding an installation script&lt;/h3&gt;

&lt;p&gt;So far I was playing by ear; I knew more or less how to reinstall the project on a new device, but I knew that after some time my memory would fade and the process would become a painstaking trial-and-error mess.&lt;/p&gt;

&lt;p&gt;I first compiled all the steps needed for this to work in the repo’s README – it took a total of &lt;a href="https://github.com/lbrito1/android-analytics/commit/9487a54b37c727bdd60b7276469fc58a8fd0d47d#diff-04c6e90faac2675aa89e2176d2eec7d8"&gt;17 steps&lt;/a&gt; to get things running. Noticing that most of these steps could be automated, I wrote a &lt;a href="https://github.com/lbrito1/android-analytics/blob/master/bin/setup.sh"&gt;setup script&lt;/a&gt; that should do most of the work. I tested it in a separate Android device to make sure it works – hopefully it works for other people as well.&lt;/p&gt;

&lt;h3 id="final-architecture"&gt;Final architecture&lt;/h3&gt;

&lt;p&gt;When someone accesses one of my tracked pages, this is roughly what happens:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;JavaScript on that page calls my domain (provided for free by &lt;a href="https://www.duckdns.org/"&gt;DuckDNS&lt;/a&gt;);&lt;/li&gt;
  &lt;li&gt;DuckDNS translates that address to my router’s most recent IP;&lt;/li&gt;
  &lt;li&gt;My router receives that request and uses the NAT table to redirect it to my Android phone;&lt;/li&gt;
  &lt;li&gt;On Android, Nginx receives the request and either logs it if the request comes from the right place (my list of tracked pages), or does nothing otherwise;&lt;/li&gt;
  &lt;li&gt;A scheduled Cron job rotates Nginx logs and converts the “old” log into rows in a Postgresql table;&lt;/li&gt;
  &lt;li&gt;I open &lt;code&gt;&amp;lt;my-android-local-ip&amp;gt;:3000&lt;/code&gt; on my desktop’s browser and view the charts, maps etc.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This diagram shows those same steps, more or less:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/diagram.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/diagram.png" alt="android-analytics diagram."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/diagram.png" alt="android-analytics diagram."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;android-analytics diagram.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I named the too (quite unimaginatively) android-analytics; code and set-up instructions are &lt;a href="https://github.com/lbrito1/android-analytics"&gt;available on Github&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="august-2021-update"&gt;August 2021 Update&lt;/h3&gt;

&lt;p&gt;I managed to install Grafana on Termux by using &lt;a href="https://f-droid.org/en/packages/exa.lnx.a/"&gt;AnLinux&lt;/a&gt;; thus, the Viewer part of the project is no longer needed.&lt;/p&gt;

&lt;p&gt;Also, by using &lt;a href="https://ngrok.com/"&gt;Ngrok&lt;/a&gt; (free tier), the project now works if you’re behind CGNAT, which is my case. No need for dynamic DNS or port forwarding as well.&lt;/p&gt;

&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;I used the Google Analytics analogy because that’s the tool that most people are familiar with, and most people will immediately understand what this thing is about, which probably wouldn’t happen if instead of saying this was a “simple Google Analytics alternative”, I said it was a “log-based web analytics tool”.&lt;/p&gt;

&lt;p&gt;But saying this is a “Google Analytics replacement” is like saying that a bicycle is a replacement for a truck. Although they are both transportation modes, they’re different in every other aspect. The thing is: sometimes you really need a truck, but a lot of times you just need to get from point A to point B, and a bike is more than enough. In fact, it is probably &lt;em&gt;better&lt;/em&gt;: it is cheaper, easier to park and carry around, and has a smaller environmental footprint. This project is a bike: for some people, that’s all they will need.&lt;/p&gt;

&lt;p&gt;There’s absolutely no need to use a mammoth like Google Analytics for a personal blog or pet project. Its more than wasteful – you’re offering free data to Google in exchange for a fancy dashboard so you can play I’m-SEO-master-at-Adcorp-LLC. Someone has to keep the data, of course, but I’d argue that a decentralized approach is much safer and probably more ethical than data monopoly by a single huge advertising company.&lt;/p&gt;

&lt;p&gt;So what are the alternatives? There are a few competitors – we already discussed that in a &lt;a href="#the-lack-of-competition"&gt;previous section&lt;/a&gt;. But then we have all this processing power just lying around, free and unused; we might as well make better use of it. Smartphones have amazing processing, networking and storage capabilities, yet for many reasons they turn old very quickly, which translates to getting sold (in the best case); shoved into oblivion in our designated e-junk clutter drawer; or just discarded.&lt;/p&gt;

&lt;p&gt;It is just sad that we have these tiny slabs of processing power that could &lt;a href="https://www.realclearscience.com/articles/2019/07/02/your_mobile_phone_vs_apollo_11s_guidance_computer_111026.html"&gt;navigate Man to the Moon and back thousands of times over&lt;/a&gt;, and we can’t seem to quite find any better occupation for them other than sitting in a dusty drawer for years or getting trashed. That is why even if it takes a little extra effort, I’d rather repurpose and reuse something I already own than subscribe to the fanciest new PaaS.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2020-06-27:/blog/2020/06/free_https_home_server.html</id>
    <title type="html">Setting up a free HTTPS home server</title>
    <published>2020-06-27T22:48:21Z</published>
    <updated>2020-06-27T22:48:21Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2020/06/free_https_home_server.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2020/06/free_https_home_server.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/cool-background.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/cool-background.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Try searching for “free dynamic dns https”, “free domain with SSL” or anything similar. There won’t be a lot of meaningful results. Sure, some of the results are pretty close, like &lt;a href="https://www.freecodecamp.org/news/free-https-c051ca570324/"&gt;this guide&lt;/a&gt; on how to get free SSL certification from Cloudflare, or &lt;a href="https://medium.com/@jeremygale/how-to-set-up-a-free-dynamic-hostname-with-ssl-cert-using-google-domains-58929fdfbb7a"&gt;this one&lt;/a&gt; on setting up a free dynamic hostname with SSL, but they all assume you &lt;em&gt;already own a domain&lt;/em&gt;. If you’re looking for a completely free domain that you can use for your personal web server that also has verified SSL, there are very few results.&lt;/p&gt;

&lt;p&gt;But why was I even looking for this?&lt;/p&gt;

&lt;p&gt;I’m working on a side project. It has a web server that communicates with a static web page hosted on Github Pages. There are a lot of ways of setting that up; in my particular case, I have a local (as in in my house) HTTP web server accepting traffic on a non-standard port (port &lt;code&gt;80&lt;/code&gt; is blocked by my ISP &lt;a href="https://www.reddit.com/r/InternetBrasil/comments/e9v5o0/abertura_das_portas_80_e_443_na_claronet/"&gt;for commercial reasons&lt;/a&gt; – this detail is of paramount importance, but more on that later). It is accessible through my external IP (which is dynamic), which can be mapped to a dynamic DNS domain.&lt;/p&gt;

&lt;p&gt;I wanted to run a simple API on the web server and access it through static pages (like this blog) hosted on Github Pages (which has a verified SSL certificate). &lt;a href="https://stackoverflow.com/questions/62378047/is-it-possible-to-make-a-cross-domain-javascript-request-to-http-from-https"&gt;I asked the Internet&lt;/a&gt; if it is possible to call from a SSL-verified page (in JavaScript) a different server that does not have a verified SSL certificate (that is, my aforementioned webapp running in my home server). It isn’t, so the conclusion was that I needed somehow to get a verified SSL certificate for my dynamic DNS domain.&lt;/p&gt;

&lt;p&gt;Having no idea whether this was possible, I started to research.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id="setting-up-dynamic-dns"&gt;Setting up Dynamic DNS&lt;/h2&gt;

&lt;p&gt;Most ISPs provide dynamic IP addresses for their residential customers, while static IP addresses are usually reserved to the “commercial” or “business” tier. That means your public IP address changes (usually every &lt;a href="https://vicimediainc.com/often-ip-addresses-change/"&gt;14 days&lt;/a&gt;), so DNS servers will have to keep track of your changing IP somehow. That kind of service is called Dynamic DNS, or DDNS for short.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://free-for.dev/#/?id=dns"&gt;Several companies&lt;/a&gt; provide DDNS service for free. Some of them also provide a free subdomain, which is useful if you don’t own a domain yourself (I don’t). I’ve tried out most of the free DDNS providers, the most prominent seeming to be Hurricane Electric, No-ip, Dynu and DuckDNS. If you’re up for it there are even several blog posts out there explaining &lt;a href="https://blog.heckel.io/2016/12/31/your-own-dynamic-dns-server-powerdns-mysql/"&gt;how to set up your own dynamic DNS server&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I wasn’t feeling too adventurous so I decided to set up shop with DuckDNS. It is really easy to set up, comes with a great HTTP API for updating the domain’s TXT, provides free subdomains that don’t expire (No-ip for instance has subdomains that expire after 30 days), and has a valid SSL certificate. They have a page &lt;a href="https://www.duckdns.org/install.jsp"&gt;explaining how to set up the actual DDNS service&lt;/a&gt;, so I’ll skip that.&lt;/p&gt;

&lt;h3 id="caveat-carrier-grade-nat"&gt;Caveat: carrier-grade NAT&lt;/h3&gt;

&lt;p&gt;One big potential problem in the DDNS setup is whether you’re behind a &lt;a href="https://www.wikiwand.com/en/Carrier-grade_NAT"&gt;carrier-grade NAT (CGNAT)&lt;/a&gt;, which some ISPs unfortunately do. In short, being in a CGNAT boils down to not having a public IP address – you’re part of your ISP’s private network, and your router’s “public” IP address is actually a private IP address within that private network, which the ISP translates to and from the Internet.&lt;/p&gt;

&lt;p&gt;CGNATs suck, and it essentially &lt;a href="https://www.reddit.com/r/HomeNetworking/comments/6ahcp6/rtn66u_isp_changed_to_cgnat_broke_ddns/"&gt;makes using DDNS impossible&lt;/a&gt;. You can find out if you’re behind a CGNAT by comparing your WAN IP address (displayed in the router admin page) and your public IP. If they differ, you’re probably behind a CGNAT&lt;/p&gt;

&lt;h2 id="setting-up-a-verified-ssl"&gt;Setting up a verified SSL&lt;/h2&gt;

&lt;p&gt;I had set up the dynamic DNS service, and the next step was finding out if it was even possible to obtain a free valid SSL certificate for my subdomain.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://letsencrypt.org/getting-started/"&gt;Let’s Encrypt&lt;/a&gt; provides free valid SSL certificates, which are usually obtained by using &lt;a href="https://certbot.eff.org/"&gt;Certbot&lt;/a&gt;, a handy software that will handle most of the complicated SSL verification process you. There are &lt;a href="https://letsencrypt.org/docs/client-options/"&gt;several other&lt;/a&gt; alternative tools that implement the same protocol used by Let’s Encrypt, but I really recommend using Certbot – it has much better out-of-the-box functionality than all the other tools I tried out, and the community is much bigger. The only caveat I could find is that you need &lt;code&gt;sudo&lt;/code&gt; access to use it properly.&lt;/p&gt;

&lt;p&gt;One thing I’d wish someone had told me before I spent hours looking for alternatives to Certbot is that &lt;strong&gt;it doesn’t have to be executed in the host that is ultimately going to obtain the SSL certificate&lt;/strong&gt;. This might be a crucial bit of information if you can’t run as root on the actual host that will obtain the SSL certificate, which was my case. It is perfectly fine to run Certbot on a separate computer, obtain the SSL certificates and then &lt;code&gt;scp&lt;/code&gt; them to the correct host.&lt;/p&gt;

&lt;p&gt;Now, as I mentioned, my ISP blocks incoming traffic to port &lt;code&gt;80&lt;/code&gt; for their residential customers. This is relevant because Let’s Encrypt uses by default the &lt;strong&gt;HTTP-01 challenge&lt;/strong&gt; in the SSL verification process, and it requires the ports &lt;code&gt;80&lt;/code&gt; and &lt;code&gt;443&lt;/code&gt; to be open. However, LE also offers the alternative &lt;strong&gt;&lt;a href="https://letsencrypt.org/docs/challenge-types/"&gt;DNS-01 challenge&lt;/a&gt;&lt;/strong&gt; which &lt;strong&gt;does not&lt;/strong&gt; require those ports to be open (but requires the ability to update TXT domain records, which not all DDNS service providers allow – No-ip, for instance, does not). I happened to find out about this by reading &lt;a href="https://www.splitbrain.org/blog/2017-08/10-homeassistant_duckdns_letsencrypt"&gt;this very helpful post&lt;/a&gt; from someone in a similar predicament (home server, port &lt;code&gt;80&lt;/code&gt; not available) saying he used this alternative challenge successfully with DuckDNS (thank you!). In &lt;a href="https://serverfault.com/a/812038/578968"&gt;this Server Fault answer&lt;/a&gt;, the poster explains how to use Certbot with the DNS-01 challenge (thank you!).&lt;/p&gt;

&lt;h3 id="running-certbot-with-dns-01-and-duckdns"&gt;Running Certbot with DNS-01 and DuckDNS&lt;/h3&gt;

&lt;p&gt;DNS-01 works by confirming that you can modify the DNS TXT record of your domain.&lt;/p&gt;

&lt;p&gt;Here’s the command to start SSL verification with Certbot using DNS-01 and a DuckDNS subdomain, and the expected output:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;certbot &lt;span class="nt"&gt;-d&lt;/span&gt;  my-subdomain.duckdns.org &lt;span class="nt"&gt;--manual&lt;/span&gt; &lt;span class="nt"&gt;--preferred-challenges&lt;/span&gt; dns certonly

Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator manual, Installer None
Obtaining a new certificate
Performing the following challenges:
dns-01 challenge &lt;span class="k"&gt;for &lt;/span&gt;my-subdomain.duckdns.org

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
NOTE: The IP of this machine will be publicly logged as having requested this
certificate. If you&lt;span class="s1"&gt;'re running certbot in manual mode on a machine that is not
your server, please ensure you'&lt;/span&gt;re okay with that.

Are you OK with your IP being logged?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
&lt;span class="o"&gt;(&lt;/span&gt;Y&lt;span class="o"&gt;)&lt;/span&gt;es/&lt;span class="o"&gt;(&lt;/span&gt;N&lt;span class="o"&gt;)&lt;/span&gt;o: Y

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please deploy a DNS TXT record under the name
_acme-challenge.my-subdomain.duckdns.org with the following value:

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Before continuing, verify the record is deployed.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Press Enter to Continue&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;At this point you have to do as the program says: update the DNS TXT record. Thankfully, this is exceedingly easy to do with DuckDNS (see their &lt;a href="https://www.duckdns.org/spec.jsp"&gt;spec page&lt;/a&gt; for instructions).&lt;/p&gt;

&lt;p&gt;You can verify that the TXT was updated by running &lt;code&gt;dig&lt;/code&gt;:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;dig my-subdomain.duckdns.org TXT

&lt;span class="p"&gt;;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; DiG 9.11.3-1ubuntu1.12-Ubuntu &amp;lt;&amp;lt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; my-subdomain.duckdns.org TXT
&lt;span class="p"&gt;;;&lt;/span&gt; global options: +cmd
&lt;span class="p"&gt;;;&lt;/span&gt; Got answer:
&lt;span class="p"&gt;;;&lt;/span&gt; -&amp;gt;&amp;gt;HEADER&lt;span class="o"&gt;&amp;lt;&amp;lt;-&lt;/span&gt; &lt;span class="no"&gt;opcode&lt;/span&gt;&lt;span class="sh"&gt;: QUERY, status: NOERROR, id: 21765
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;my-subdomain.duckdns.org. IN  TXT

;; ANSWER SECTION:
my-subdomain.duckdns.org. 59 IN  TXT "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

;; Query time: 335 msec
;; SERVER: 127.0.0.53#53(127.0.0.53)
;; WHEN: Mon Jun 15 18:50:41 -03 2020
;; MSG SIZE  rcvd: 114&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Once you confirmed the TXT value, the remainder of Certbot’s output should be this success message:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;Waiting &lt;span class="k"&gt;for &lt;/span&gt;verification...
Cleaning up challenges

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/my-subdomain.duckdns.org/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/my-subdomain.duckdns.org/privkey.pem
   Your cert will expire on 2020-09-13. To obtain a new or tweaked
   version of this certificate &lt;span class="k"&gt;in &lt;/span&gt;the future, simply run certbot
   again. To non-interactively renew &lt;span class="k"&gt;*&lt;/span&gt;all&lt;span class="k"&gt;*&lt;/span&gt; of your certificates, run
   &lt;span class="s2"&gt;"certbot renew"&lt;/span&gt;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let&lt;span class="s1"&gt;'s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;All set! You now have a valid SSL certificate. You’ll still need to place it in the right place, which will vary depending on what web server you’re using. For example, if you’re using Nginx, the configuration file might look something like this:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code&gt;
server {
  ssl_certificate /path/to/fullchain.pem;
  ssl_certificate_key /path/to/privkey.pem;
  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;There’s quite a lot of shady-looking websites out there offering for a monthly fee the exact same thing as I just wrote about. When researching this, not knowing too much about most of these topics, I was almost fooled into accepting that this just couldn’t be done for free for some unknown technical reason. There &lt;em&gt;had&lt;/em&gt; to be a reason why there were no Google results for this – maybe my case was too specific, or maybe other people are less cheap than I am and just pay for a domain and get the SSL stuff for free.&lt;/p&gt;

&lt;p&gt;I still have no good explanation as to why the kind of guide I just wrote above didn’t show up in my research. Maybe people don’t care about home servers, or maybe I’m just not too good at searching (probably both). In any case, hopefully this post will make it clear that setting up a DDNS subdomain with SSL for free is not only possible, but really not that complicated.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2020-05-30:/blog/2020/05/communication.html</id>
    <title type="html">Communication tips for remote developers</title>
    <published>2020-05-30T15:16:00Z</published>
    <updated>2020-05-30T15:16:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2020/05/communication.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2020/05/communication.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/bridge.jpg" alt="San Francisco Bay bridge."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/bridge.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;We're all remote -- for now.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Communicating well with your co-workers and managers is supremely important to a software developer, and even more so for the remote one. With a lot more remote workers due to the COVID-19 pandemic, this topic became a lot more relevant.&lt;/p&gt;

&lt;p&gt;I’ve seen people hint at this more than a few times over the years, but I didn’t really “get it” until I started working as a fully remote engineer. I also find it important to understand not only &lt;em&gt;what&lt;/em&gt; we should be doing to achieve efficient communication, but also &lt;em&gt;why&lt;/em&gt; we should be doing those things in those ways.&lt;/p&gt;

&lt;p&gt;To me, the single most important thing to keep in mind is that people’s mental resources: time, attention span, etc, like yours, are limited.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;That might be obvious, but different management styles might make it seem otherwise – a more hands-on manager might kind of seem like he is acutely aware of what you’re doing all the time, but that is hardly ever the case. Managing styles aside, managers are, after all, humans like the rest of us and have limited time and resources. They can’t possibly have the same insight into each task as the respective engineers working on them.&lt;/p&gt;

&lt;p&gt;The corollary to that is that it is your job to keep managers in the loop, providing the right amount of information at the right time through the right channel (text, video call, presentation…). Just like any other skill, this is something you can learn over time.&lt;/p&gt;

&lt;p&gt;Similar reasoning applies to co-workers: people are usually deeply involved in whatever it is they’re doing, so they won’t usually know too many details about what you or other co-workers are doing all the time.&lt;/p&gt;

&lt;p&gt;A lot of the things you need to do are fairly obvious and well-known: be clear about what you’re saying, keep communicating frequently, etc. Other things aren’t too obvious (at least to me, that is) and are worth sharing in this short blog post.&lt;/p&gt;

&lt;h2 id="dont-write-a-novel"&gt;Don’t write a novel&lt;/h2&gt;

&lt;p&gt;Reading is hard. People’s availability and attention span vary. Try to get your point across with the least words as possible.&lt;/p&gt;

&lt;p&gt;If I’m writing an issue update, pull request, or other technical information, I usually start with a more winding text and then prune as much of it as I can. This can be really simple, like changing “According to #85748, the problem I described started when…” to “The problem began when … (#85748)”.&lt;/p&gt;

&lt;p&gt;This can’t be done at the expense of clarity, though. It is preferable to write or say “I think option B is the way to go” than an ambiguous “sounds good”.&lt;/p&gt;

&lt;h2 id="manage-expectations"&gt;Manage expectations&lt;/h2&gt;

&lt;p&gt;People don’t like to feel disappointed. To avoid unfulfilled expectations, it is your job to make sure those expectations stay realistic – the more so when the task evolves or unravels into something much more complicated than people originally expected.&lt;/p&gt;

&lt;p&gt;As we all know, there’s a lot of uncertainty in this job. Something that seems easy might actually be super easy or might be very hard. Unexpected difficulties are expected, and most people are fine with that &lt;strong&gt;as long as they also think that those problems are actually problems.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;That’s a huge caveat: if you’re unable to convince other people about the seriousness of the unexpected problems you’re facing, you might as well not say anything at all about them. People usually only believe what they understand, and it is your job to properly communicate that to people less involved in the task than you are.&lt;/p&gt;

&lt;h2 id="tailor-to-the-audience"&gt;Tailor to the audience&lt;/h2&gt;

&lt;p&gt;Different people use different lingo to express the same things. Sales people will use different terms than engineering people.&lt;/p&gt;

&lt;p&gt;Adjusting your language to the audience isn’t just about replacing technical words with other words, though, but also about cropping the information in the right way.&lt;/p&gt;

&lt;p&gt;Excess information that isn’t relevant to the point you want to get across generates noise and confusion. This might be seen as a broader definition of the first topic: if you can manage to get your point across with less information (whatever that is: spreadsheets, images, etc), then that is certainly desirable. If the person you’re talking or presenting to is only interested in 1 of the 3 columns of a spreadsheet, although the other 2 might be insightful to you, you should probably refrain from showing them at that moment.&lt;/p&gt;

&lt;p&gt;And that is the note I’m ending this post on. These three things are probably obvious or second nature to a lot of people, but at least to me, it took a few years of remote work to fully appreciate them. Hopefully this post can be helpful to other like-minded developers.&lt;/p&gt;

</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2020-05-16:/blog/2020/05/figuring_out_nvidia_x_linux.html</id>
    <title type="html">Figuring out the Nvidia x Linux puzzle</title>
    <published>2020-05-16T19:48:00Z</published>
    <updated>2020-05-16T19:48:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2020/05/figuring_out_nvidia_x_linux.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2020/05/figuring_out_nvidia_x_linux.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/power.png" alt="Ubuntu power consumption chart."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/power.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Ubuntu's power rate over time.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;I’ve struggled with some kind of problem with Nvidia graphics cards on Linux since forever.&lt;/p&gt;

&lt;p&gt;Most commonly, an external monitor wouldn’t work or the dedicated card would refuse to power off when it should.&lt;/p&gt;

&lt;p&gt;The latter problem – a power-hogging discrete Nvidia card not turning off when it isn’t needed, specifically in &lt;a href="https://www.wikiwand.com/en/Nvidia_Optimus"&gt;Optimus&lt;/a&gt;-enabled laptops – has consistently haunted me throughout the years. At least in my experience, this problem is in that sweet spot of things that are definitively annoying and kind of inconvenient, but complicated enough not to be worth the several work-hours needed to definitively solve it.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;I know that I’m not alone here, as other people over the internet have said things like &lt;em&gt;&lt;a href="https://forum.manjaro.org/t/solved-bumblebee-issues-with-bbswitch/70137"&gt;“I’ve been pulling my hair out for the past few hours trying to configure my graphics drivers on my laptop”&lt;/a&gt;&lt;/em&gt;. I’ve also not been a total sloth about this: although I have tried many times in the past to fix this, I’ve consistently found myself thinking “okay, &lt;em&gt;now&lt;/em&gt; this is fixed”, only to a few hours/days later notice that my laptop battery was drained in an hour and the problem was back. I actually re-wrote a significant part of this post because when I thought I was finished, my Nvidia card started turning on again and I had to do more research.&lt;/p&gt;

&lt;p&gt;Taking advantage of the extra time in my hands due to the Covid-19 city-wide lockdown, I decided to persistently look for a solution to this issue. This guide is just a documentation of this process. I use Ubuntu, but similar steps should be valid with whatever distro you’re using. Also, some or many of the steps might not actually be necessary - they’re just what happened to finally work in my case.&lt;/p&gt;

&lt;h3 id="install-the-proprietary-nvidia-drivers"&gt;1. Install the proprietary Nvidia drivers&lt;/h3&gt;

&lt;p&gt;Ubuntu uses the open-source Nouveau driver for Nvidia cards, which doesn’t play well with Optimus-enabled laptops. Let’s install the proprietary Nvidia driver.&lt;/p&gt;

&lt;p&gt;First, find out what’s the recommended Nvidia driver:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ubuntu-drivers devices

&lt;span class="o"&gt;==&lt;/span&gt; /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 &lt;span class="o"&gt;==&lt;/span&gt;
modalias : pci:v000010DEd00002191sv00001462sd00001274bc03sc00i00
vendor   : NVIDIA Corporation
driver   : nvidia-driver-435 - distro non-free
driver   : nvidia-driver-440 - distro non-free recommended
driver   : xserver-xorg-video-nouveau - distro free &lt;span class="nb"&gt;builtin&lt;/span&gt;

&lt;span class="o"&gt;==&lt;/span&gt; /sys/devices/pci0000:00/0000:00:14.3 &lt;span class="o"&gt;==&lt;/span&gt;
modalias : pci:v00008086d0000A370sv00008086sd00000034bc02sc80i00
vendor   : Intel Corporation
manual_install: True
driver   : backport-iwlwifi-dkms - distro free&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then install it:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;apt &lt;span class="nb"&gt;install &lt;/span&gt;nvidia-440&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Another option is to pick the driver in the Additional Drivers tab of the &lt;code&gt;Softwares &amp;amp; Updates&lt;/code&gt; tool:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/2020-05-16-05-04.nvidia.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/2020-05-16-05-04.nvidia.png" alt="Nvidia proprietary driver option in Ubuntu's Additional Drivers menu."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/2020-05-16-05-04.nvidia.png" alt="Nvidia proprietary driver option in Ubuntu's Additional Drivers menu."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Nvidia proprietary driver option in Ubuntu's Additional Drivers menu.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Nvidia’s proprietary driver lets you choose if you want to use the dedicated or integrated GPU, which you can try setting:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/nvidia-setting.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/nvidia-setting.png" alt="Nvidia proprietary driver's GPU selection menu."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/nvidia-setting.png" alt="Nvidia proprietary driver's GPU selection menu."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Nvidia proprietary driver's GPU selection menu.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Now if you’re lucky this might be enough. Check the power usag using Ubuntu’s &lt;code&gt;Power Statistics&lt;/code&gt; tool or &lt;code&gt;powertop&lt;/code&gt;: if the Nvidia card is successfully turned off, then typical power usage is somewhere between 8-14W. If, like me, this changed nothing in your power usage, read on.&lt;/p&gt;

&lt;h3 id="install-and-configure-bbswitch"&gt;2. Install and configure bbswitch&lt;/h3&gt;

&lt;p&gt;Although Nvidia’s proprietary driver allows selecting between integrated and dedicated cards, in my experience that setting has had no effect at all, with both cards always being powered on anyway.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;bbswitch&lt;/code&gt; is a tool that allows you to select which card you want your system to use. Ubuntu has the bbswitch-dkms package available:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;apt &lt;span class="nb"&gt;install &lt;/span&gt;bbswitch-dkms&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then configure it to always turn off the discrete card by creating the following file:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cat&lt;/span&gt; /etc/modprobe.d/bbswitch.conf
options bbswitch &lt;span class="nv"&gt;load_state&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="blacklist-nouveau-driver"&gt;3. Blacklist Nouveau driver&lt;/h3&gt;

&lt;p&gt;According to &lt;a href="https://askubuntu.com/a/1044095/463850"&gt;this Stackoverflow answer&lt;/a&gt;, there seem to be at least a couple of bugs that result in Ubuntu trying to load the Nouveau module even if you’re using a proprietary Nvidia driver. When that happens, the discrete Nvidia GPU turns on and starts hogging a lot of power.&lt;/p&gt;

&lt;p&gt;Blacklisting the Nouveau module solved this issue for me:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;bash &lt;span class="nt"&gt;-c&lt;/span&gt; &lt;span class="s2"&gt;"echo blacklist nouveau &amp;gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;bash &lt;span class="nt"&gt;-c&lt;/span&gt; &lt;span class="s2"&gt;"echo options nouveau modeset=0 &amp;gt;&amp;gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Restart and confirm that the right driver is loaded:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gpu-manager | &lt;span class="nb"&gt;grep &lt;/span&gt;nouveau
Is nouveau loaded? no
Is nouveau blacklisted? &lt;span class="nb"&gt;yes&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="blacklist-some-nvidia-modules"&gt;4. Blacklist some Nvidia modules&lt;/h3&gt;

&lt;p&gt;Even after the above, my system kept turning on the nvidia card seemingly at random. I found &lt;a href="https://github.com/Bumblebee-Project/Bumblebee/issues/951"&gt;this post&lt;/a&gt; in the Bumblebee issue tracker to be extremely helpful:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“bumblebee can turn the nvidia card off when it starts, but as soon as the nvidia module is loaded, it loads nvidia_drm, which links to drm_kms_helper and then bumblebee can’t remove the nvidia modules. This means that bumblebee can’t turn off the nvidia card when optirun terminates. To fix this, I added “alias nvidia_drm off” and “alias nvidia_modeset off” to my conf file in /etc/modprobe.d.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This is the file created by the OP:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cat&lt;/span&gt; /etc/modprobe.d/nvidia.conf

blacklist nvidia
blacklist nvidia_drm
blacklist nvidia_modeset
&lt;span class="nb"&gt;alias &lt;/span&gt;nvidia_drm off
&lt;span class="nb"&gt;alias &lt;/span&gt;nvidia_modeset off&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After creating this file and restarting, my system was finally using only the Intel integrated card. Hopefully this time it’ll stay that way.&lt;/p&gt;

&lt;h3 id="results"&gt;Results&lt;/h3&gt;

&lt;p&gt;Here’s a chart of my laptop’s power rate:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/power.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/power.png" alt="Ubuntu power consumption chart."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/power.png" alt="Ubuntu power consumption chart."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Ubuntu's power rate over time.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Using the integrated Intel GPU, the rate fluctuates around 10W. When the Nvidia card kicks in, which is what was going on around the middle of the chart, it jumps to 40W+.&lt;/p&gt;

&lt;h3 id="references"&gt;References&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=""&gt;https://linuxconfig.org/how-to-install-the-nvidia-drivers-on-ubuntu-18-04-bionic-beaver-linux&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=""&gt;https://github.com/Bumblebee-Project/bbswitch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=""&gt;https://github.com/Bumblebee-Project/Bumblebee/issues/951&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=""&gt;https://turlucode.com/optimus-bbswitch-on-ubuntu-18-04/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2020-02-05:/blog/2020/02/repurposing-android.html</id>
    <title type="html">Repurposing an old Android phone as a Ruby web server</title>
    <published>2020-02-05T12:24:41Z</published>
    <updated>2020-02-05T12:24:41Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2020/02/repurposing-android.html" type="text/html"/>
    <content type="html">&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2020/02/repurposing-android.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2020/old-android.jpg" alt="Old smartphones on a desk."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/old-android.jpg" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;CC-BY Carlos Varela, https://www.flickr.com/photos/c32/7755470064&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Do you have an old Android phone? Sure you do! There’s a mind-blowing amount of electronic waste of all kinds, and with the average person in developed countries &lt;a href="https://www.cnbc.com/2019/05/17/smartphone-users-are-waiting-longer-before-upgrading-heres-why.html"&gt;discarding their phones every couple of years&lt;/a&gt;, discarded smartphones are probably one of the most common forms of e-waste.&lt;/p&gt;

&lt;p&gt;I had an old Motorola G5 Cedric gathering dust, so I decided to do something with it – it is now running a Puma web server with a simple Sinatra webapp.&lt;/p&gt;

&lt;p&gt;Now, before going any further, you might be thinking: what is the real, practical use of all this? An old Android phone probably isn’t going to have a stellar performance, but neither do those &lt;code&gt;t2.nano&lt;/code&gt;s, honestly. I’m yet to deploy any “real” code on an Android, but even the cheaper and older phones do commonly have quad-core or even octa-core CPUs, and at least 2GB RAM, so at least in theory a phone &lt;em&gt;should&lt;/em&gt; be close – ballpark, at least – to the most modest cloud IaaS offers our there (&lt;code&gt;t2.nano&lt;/code&gt; has 512MB for instance). Of course, a phone has an ARM processor while IaaS usually are x86; memory management is entirely different as well, but still – we’re talking ballpark estimates here.&lt;/p&gt;

&lt;p&gt;Anyway, this is a short tutorial on how to repurpose an Android device as a web server – or any number of different things, really.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id="install-termux"&gt;1. Install Termux&lt;/h2&gt;

&lt;p&gt;First of all we need a Linux environment in our phone. Termux is a terminal emulator and Linux environment for Android. It’s available on Google Play Store. No additional configuration is needed after installation.&lt;/p&gt;

&lt;h2 id="set-up-ssh"&gt;2. Set up SSH&lt;/h2&gt;

&lt;p&gt;You won’t want to type a lot of commands into a tiny touchscreen, so let’s set up ssh so that we can log into Termux remotely.&lt;/p&gt;

&lt;p&gt;There are &lt;a href="https://wiki.termux.com/wiki/Remote_Access"&gt;several ways&lt;/a&gt; of doing this, but I’ve found that the easiest way is through a software called &lt;strong&gt;Dropbear&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Run this on Android:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;pkg upgrade
pkg &lt;span class="nb"&gt;install &lt;/span&gt;dropbear&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can use password-based authentication or public key authentication. You should use key-based authentication, but for testing purposes password-based is easiest. Run this on Android:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Run this on Android:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;passwd
New password:
Retype new password:
New password was successfully set.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Bonus points:&lt;/strong&gt; install a terminal multiplexer like &lt;code&gt;tmux&lt;/code&gt; or &lt;code&gt;screen&lt;/code&gt;. This will make your life much easier when running stuff via ssh:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;pkg &lt;span class="nb"&gt;install &lt;/span&gt;tmux&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now go ahead and test the connection on your desktop:&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;ssh android-ip-address &lt;span class="nt"&gt;-p&lt;/span&gt; 8022&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="set-up-static-ip-address-on-android"&gt;3. Set up static IP address on Android&lt;/h2&gt;

&lt;p&gt;Go to wifi settings, disable DHCP and assign an IP address for your phone.&lt;/p&gt;

&lt;p&gt;This is necessary so that your router won’t assign a new IP address to your phone every few hours/days, which would make configuration a lot harder.&lt;/p&gt;

&lt;h2 id="install-ruby-bundler-sinatra-and-puma"&gt;4. Install Ruby, Bundler, Sinatra and Puma&lt;/h2&gt;

&lt;p&gt;Sinatra is a lightweight web application framework, and Puma is a web server.&lt;/p&gt;

&lt;p&gt;Ruby is, well Ruby!&lt;/p&gt;

&lt;p&gt;Of course, Sinatra and Puma are just suggestions – you could even use full-blown Rails on your phone, as described in &lt;a href="https://mbobin.me/ruby/2017/02/25/ruby-on-rails-on-android.html"&gt;this neat tutorial&lt;/a&gt;. Just &lt;a href="https://devcenter.heroku.com/articles/ruby-default-web-server#why-not-webrick"&gt;don’t use WEBRick&lt;/a&gt;, the default Rails web server in development – it is single-process, single-threaded and thus not suitable for production environments (it is fine for small experiments though).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Run this on Android:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;pkg &lt;span class="nb"&gt;install &lt;/span&gt;ruby
gem &lt;span class="nb"&gt;install &lt;/span&gt;sinatra puma&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="install-nginx"&gt;Install nginx&lt;/h2&gt;

&lt;p&gt;nginx is a web server, reverse-proxy and load balancer. Although most useful in multi-server setups where it is used to distribute requests among different instances, nginx is also a good idea in our setup because of the embedded DDoS protection and static file serving that it provides.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Run this on Android:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;code class="language-bash"&gt;pkg &lt;span class="nb"&gt;install &lt;/span&gt;nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now the slightly tricky part is configuring nginx to work with Puma. &lt;a href="https://gist.github.com/ctalkington/4448153"&gt;This gist&lt;/a&gt; is a pretty good start – copy &amp;amp; paste &lt;code&gt;nginx.conf&lt;/code&gt; and change &lt;code&gt;appdir&lt;/code&gt; to your webapp’s root dir. In my case, for example, that would be &lt;code&gt;/data/data/com.termux/files/home/android-sinatra&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id="set-up-port-forwarding"&gt;Set up port forwarding&lt;/h2&gt;

&lt;p&gt;You probably want your web server to be accessible through the internet, so you’ll have to set up port forwarding in your router to redirect incoming requests to your public IP address to your brand new Android web server.&lt;/p&gt;

&lt;p&gt;How exactly to do this varies depending on your router. &lt;a href="https://www.noip.com/support/knowledgebase/general-port-forwarding-guide/"&gt;Here’s&lt;/a&gt; a pretty good tutorial to get you started.&lt;/p&gt;

&lt;h2 id="configure-a-dynamic-dns"&gt;Configure a dynamic dns&lt;/h2&gt;

&lt;p&gt;Most people have dynamic public IP addresses. In these cases it is useful to set up a dynamic dns (DDNS) service, which provides you with a static domain name that redirects automatically to whatever your public IP address is at that moment.&lt;/p&gt;

&lt;p&gt;There are few free services that provide DDNS nowadays; I’m using &lt;a href="https://www.noip.com/"&gt;no-ip&lt;/a&gt; and it has been okay so far. You do have to “renew” your domain every month though.&lt;/p&gt;

&lt;p&gt;After setting up a DDNS, you’ll have to configure your router as well so that it periodically notifies the DDNS service with your current IP address. Again, how exactly to do this depends on your router model.&lt;/p&gt;

&lt;h2 id="hello-world"&gt;Hello world!&lt;/h2&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/android-web-server.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/android-web-server.jpg" alt="Puma and nginx running on a Motorola G5."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/android-web-server.jpg" alt="Puma and nginx running on a Motorola G5."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Puma and nginx running on a Motorola G5.&lt;/div&gt;
  
&lt;/div&gt;

&lt;h2 id="under-siege"&gt;Under siege&lt;/h2&gt;

&lt;p&gt;You can simulate real-world usage through &lt;a href="https://www.joedog.org/siege-home/"&gt;&lt;code&gt;siege&lt;/code&gt;&lt;/a&gt;, a http load testing software. Here’s a screenshot of &lt;code&gt;siege&lt;/code&gt; running on my setup with 3 concurrent users (real tests would use bigger numbers):&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/siege.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/siege.jpg" alt="Screenshot of siege running on a terminal."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/siege.jpg" alt="Screenshot of siege running on a terminal."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;siege running in the foreground; nginx logs and top on remote (android) running in the background terminals.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;The numbers in that screenshot don’t matter much because our webapp was serving a simple 100-char response with a timestamp, but it is enough to at least know that the server can handle a few concurrent users.&lt;/p&gt;

&lt;h2 id="epilogue-safety"&gt;Epilogue: safety&lt;/h2&gt;

&lt;p&gt;If you’ve watched &lt;a href="https://en.wikipedia.org/wiki/Mr._Robot"&gt;Mr Robot&lt;/a&gt;, you know that the internet can be a dangerous place. That is a lot more true if you have a web server open to the internet.&lt;/p&gt;

&lt;p&gt;Within a few hours of opening up the server, it was already being crawled by all sorts of things. Most are innocuous indexing robots, but some are definitively not so nice, like these two requests:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2020/scanners.jpg" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2020/scanners.jpg" alt="nginx logs showing port scanning attacks."&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2020/scanners.jpg" alt="nginx logs showing port scanning attacks."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;Most of those requests seem fine, but the two in red are probably some kind of attack.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;So the headline here is: keep all software updated, keep an eye on access logs and maybe go through nginx safety guides such as &lt;a href="https://www.cyberciti.biz/tips/linux-unix-bsd-nginx-webserver-security.html"&gt;this&lt;/a&gt; and &lt;a href="https://geekflare.com/nginx-webserver-security-hardening-guide/"&gt;this&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2019-11-06:/blog/2019/11/speeding-up-backend-graph-theory.html</id>
    <title type="html">Speeding Up the Backend with Graph Theory</title>
    <published>2019-11-06T22:29:15Z</published>
    <updated>2019-11-06T22:29:15Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2019/11/speeding-up-backend-graph-theory.html" type="text/html"/>
    <content type="html">
&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/2019/11/speeding-up-backend-graph-theory.html"&gt;
      &lt;img class="lazy" data-src="/blog/assets/images/2019/0076-final-results.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0076-final-results.png" alt="Alternative text to describe image."&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Here at Sensor Tower we handle large volumes of data, so to keep things snappy for our customers we need to think carefully about how we process and serve that data.&lt;/p&gt;

&lt;p&gt;Understanding the data we’re handling is a fundamental part of improving the way we serve it, and by analyzing how an important backend service worked, we were able to speed it up by a factor of four.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;&lt;em&gt;This post was originally posted in the &lt;a href="https://sensortower.com/blog/speeding-up-the-backend-with-graph-theory"&gt;Sensor Tower blog&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;

&lt;h2 id="background"&gt;Background&lt;/h2&gt;

&lt;p&gt;We have many user-facing endpoints in Sensor Tower. So many, in fact, that we have numerous dashboards to keep tabs on how the system behaves.&lt;/p&gt;

&lt;p&gt;A few months ago, we noticed that a particular and very important endpoint was very sluggish: While all the other endpoints of the same type had &amp;lt;50ms latencies, this particular service took a leisurely 300 to 500ms to respond. Here’s a diagram of how that looked:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0070-sadface-backend.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0070-sadface-backend.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0070-sadface-backend.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;The customer doesn’t look very happy up there! So, we decided to take some time and do an in-depth analysis of that endpoint.&lt;/p&gt;

&lt;p&gt;Okay, now to a more serious diagram. Here’s what that endpoint looked like:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0070-diagram.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0070-diagram.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0070-diagram.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;The numbered steps in the diagram above perform the following operations:
1. Decode a Protobuf string and build a Ruby object from it;
2. Modify the object;
3. Encode the Ruby object back to Protobuf.&lt;/p&gt;

&lt;p&gt;In essence, the endpoint receives Protobuf-encoded strings, does some work on them, and returns a processed version of the Protobuf-encoded string to the client. If you don’t know what Protobuf is, that’s okay; I didn’t either. You can think of it as something similar to JSON: A serialized tree structure encoded using a binary format rather than text.&lt;sup id="fnref:1" role="doc-noteref"&gt;&lt;a href="#fn:1" class="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Once we pinpointed that the endpoint slowness was due to Protobuf parsing, the next step was to try and find bottlenecks in the algorithm. The proper way to do this (which is not to just to read the code thoroughly) is by using a profiler.&lt;/p&gt;

&lt;p&gt;With the help of &lt;a href="https://ruby-prof.github.io"&gt;ruby-prof&lt;/a&gt; (generate profile data) and &lt;a href="https://kcachegrind.github.io"&gt;KCacheGrind&lt;/a&gt; (view profile data), we were able to identify two methods, &lt;code&gt;#find_all&lt;/code&gt; and &lt;code&gt;#encode&lt;/code&gt;, that took a large portion of the CPU time:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0070-profiler.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0070-profiler.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0070-profiler.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;While a profiler is a useful tool to identify potential problems, it has its limitations. Profiling helps you visualize data from &lt;em&gt;a single run&lt;/em&gt; through your code. That might be fine if you’re analyzing a simple algorithm that deals with very homogeneous input, but is not really enough in the case of our back-end service, which receives thousands of very different inputs every hour.&lt;/p&gt;

&lt;p&gt;In other words, we also needed to validate the profiler results with more data.&lt;/p&gt;

&lt;p&gt;Taking this understanding into account, we opted for benchmarking a few thousand requests. Specifically, we benchmarked the &lt;code&gt;#find_all&lt;/code&gt; and &lt;code&gt;#encode&lt;/code&gt; methods and found out that, while the time they consumed relative to the total time varied, the sum of those two methods took almost 100 percent of the total time of the entire endpoint. At this point we knew we could focus our attention on these two methods.&lt;/p&gt;

&lt;p&gt;Naturally, the first step was to understand what each of those methods did.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;#find_all&lt;/code&gt; is responsible for decoding and modifying the object (steps one and two in the diagram), while &lt;code&gt;#encode&lt;/code&gt; is exactly what the name implies: It re-encodes the modified Ruby object back to Protobuf (step three).&lt;/p&gt;

&lt;p&gt;With that said, let’s go through the optimizations performed in both of these methods.&lt;/p&gt;

&lt;h2 id="first-optimization-encode"&gt;First Optimization: Encode&lt;/h2&gt;

&lt;p&gt;Before we dive into the first optimization, let’s first explain how exactly the encoding/decoding processing works. Here’s an overview of what they do:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0071-decode-encode.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0071-decode-encode.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0071-decode-encode.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;*Those Strings aren't really Protobuf -- because it is a binary encoding, it isn't too easy on the eyes, so for the sake of readability we're using this pseudo-JSON representation.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;There are two things we need to point out about this decoding/encoding process that might not be obvious:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Both encoding and decoding work recursively, starting at the root and finding their way down to the leaves;&lt;/li&gt;
  &lt;li&gt;Each node in the Ruby object also contains the original Protobuf string for that node. So for instance the node &lt;code&gt;C&lt;/code&gt; in the example above also contains the following string: &lt;code&gt;"{ C: { B: [A]}, F: [D, X1] }"&lt;/code&gt;; the node &lt;code&gt;B&lt;/code&gt; contains this other string: &lt;code&gt;"{ B: [A] }"&lt;/code&gt;, and so on.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now we’re ready to understand the actual optimization.&lt;/p&gt;

&lt;p&gt;Let’s take a detailed look at the modification process:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0072-decode-encode-detail.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0072-decode-encode-detail.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0072-decode-encode-detail.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;One of the most fundamental steps of any optimization is avoiding repeated work. If we look closely, we can see that the nodes in blue (A, B, D) &lt;em&gt;were not modified&lt;/em&gt;: Look at the strings generated by decode (left side, in yellow) and compare them with the ones generated by encode (blue, to the right)—they’re identical! Conversely, nodes in red (C, F) were indeed modified: The strings are different. So, now we know there is some potentially repeated work going on.&lt;/p&gt;

&lt;p&gt;The first optimization leveraged this repeated work. Instead of always encoding every single node, we now encode &lt;em&gt;only those nodes that were modified&lt;/em&gt;. All the rest of the nodes already have a valid Protobuf string stored as an instance variable, and that string is identical to what we would obtain if we were to run &lt;code&gt;#encode&lt;/code&gt; on them.&lt;/p&gt;

&lt;p&gt;The actual code change to implement this was quite simple: Just a matter of adding a &lt;code&gt;dirty&lt;/code&gt; flag to each node, and marking the node as &lt;code&gt;@dirty = true&lt;/code&gt; if it or one of its descendants was modified.&lt;/p&gt;

&lt;p&gt;This optimization alone reduced the endpoint’s execution time by 30 percent. Here’s the execution time chart right after deploying the optimization:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0073-result-optim-1.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0073-result-optim-1.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0073-result-optim-1.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;h2 id="second-optimization-finding-a-node"&gt;Second Optimization: Finding a Node&lt;/h2&gt;

&lt;p&gt;The first optimization worked on the &lt;code&gt;#encode&lt;/code&gt; method, so the natural next step was to look at the other time-consuming method, &lt;code&gt;#find_all&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As we briefly mentioned, &lt;code&gt;#find_all&lt;/code&gt; is responsible for two things: Decoding the Protobuf string into a Ruby object and modifying the object itself.&lt;/p&gt;

&lt;p&gt;Unfortunately, there is no way of knowing beforehand if we’ll need to modify anything or not, so we’ll always have to do the decoding step. But what about the other thing &lt;code&gt;#find_all&lt;/code&gt; does, modifying the object?&lt;/p&gt;

&lt;p&gt;Before diving in, let’s recall a few things:
1. Protobuf is a tree-based data structure;
2. The trees we receive have no internal order to take advantage of;
3. Our algorithm searches for specific nodes and removes them from the tree;
4. We don’t know what the trees look like beforehand.&lt;/p&gt;

&lt;p&gt;Before this optimization, &lt;code&gt;#find_all&lt;/code&gt; was running a simple tree traversal to try and find those specific nodes mentioned in step three above. This is an acceptable approach when your input is small or when you’re not too worried about response time, but when you have massive inputs and want to deliver the smallest possible runtime, tree traversals can be a problem: They have linear time complexity (&lt;code&gt;O(n)&lt;/code&gt;, where n is the number of nodes).&lt;/p&gt;

&lt;p&gt;Once we know the path to a node, though, accessing it is very cheap: It can be done in logarithmic time, &lt;code&gt;O(log n)&lt;/code&gt;. This is possible because of a mathematical property of trees: Tree height is roughly a logarithmic function of the amount of nodes (it might degenerate into a linear function as well, but let’s leave those explanations to the textbooks), thus the average-case maximum path length to a node (that is, from the root down to the deepest leaf) is also bound to that same logarithmic constraint.&lt;/p&gt;

&lt;p&gt;So, we started looking closely to which paths we were going through to access those few nodes we wanted to remove. Ideally, there would be a single, universal path found in all the trees we ever encounter. That, way we could store that single path and always be guaranteed of finding the nodes we want to. Conversely, the worst possible outcome would be that every tree had a unique path to those nodes.&lt;/p&gt;

&lt;p&gt;The truth lied somewhere in between those two extremes (thankfully for us, it leaned more towards the former rather than the latter). Here’s a chart of the amount of different paths we found over time (the two curves represent paths to two of the nodes we want to remove):&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0070-paths-log.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0070-paths-log.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0070-paths-log.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;Without going into too much detail about that chart, just notice that it is &lt;em&gt;very logarithmic!&lt;/em&gt; This is excellent for us, because it means that with a relatively small amount of paths we can find a very large percentage of the total nodes we want to find (and for the few we don’t, not finding them is okay). The next chart compares what we actually found (logarithmically growing paths) with the worst possible scenario mentioned previously:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0070-worst-case.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0070-worst-case.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0070-worst-case.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;So, the second optimization was, in the end, also very simple: We simply collected a large enough amount of different paths and then traversed to them in logarithmic time instead of doing a full tree traversal that takes linear time to find the nodes we wanted to modify. This was responsible for a 300 percent speedup:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0075-result-optim-2.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0075-result-optim-2.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0075-result-optim-2.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;h2 id="caveats"&gt;Caveats&lt;/h2&gt;

&lt;p&gt;You might have noticed that this method is not perfect in the sense that it doesn’t always find all the nodes that we would’ve found using a complete tree traversal. This is quite true: The optimization comes with an accuracy trade-off. While this might be a deal-breaker for systems where you actually need 100 percent accuracy at all times, this wasn’t really a problem for us; Missing a few nodes out of the several thousand we process each hour wasn’t really a big deal.&lt;/p&gt;

&lt;p&gt;As time passes, however, and different trees keep coming in, the precision of this approach eventually declines to a level that is significant even for our not-too-strict requirements. This happens slowly, because of how different paths appear (following a logarithmic function), but surely—our accuracy was ever-descending because we had used a fixed number of paths.&lt;/p&gt;

&lt;p&gt;After employing our optimized algorithm to the payload and responding to the request, we post-process a subset of the the requests in the background and dynamically update the path definitions. This way, we always have a very high success rate on the parsing but keep the latency of responding to a particular request low.&lt;/p&gt;

&lt;h2 id="final-results"&gt;Final Results&lt;/h2&gt;

&lt;p&gt;Here’s a chart showing our execution time before and after we rolled out both optimizations:&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/2019/0076-final-results.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/2019/0076-final-results.png" alt=""&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/2019/0076-final-results.png" alt=""&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;We effectively reduced execution time from 300-500ms to 80ms with almost no impact to the user.&lt;/p&gt;

&lt;h2 id="notes"&gt;Notes&lt;/h2&gt;

&lt;div class="footnotes" role="doc-endnotes"&gt;
  &lt;ol&gt;
    &lt;li id="fn:1" role="doc-endnote"&gt;
      &lt;p&gt;Protobuf, or &lt;a href="https://en.wikipedia.org/wiki/Protocol_Buffers"&gt;Protocol buffers&lt;/a&gt;, is a binary serialization method developed by Google. &lt;a href="#fnref:1" class="reversefootnote" role="doc-backlink"&gt;↩&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry>
    <id>tag:lbrito1.github.io,2019-08-30:/blog/2019/08/creating-more.html</id>
    <title type="html">My attempt at creating more</title>
    <published>2019-08-30T00:00:00Z</published>
    <updated>2019-08-30T00:00:00Z</updated>
    <link rel="alternate" href="https://lbrito1.github.io/blog/2019/08/creating-more.html" type="text/html"/>
    <content type="html">&lt;p&gt;I began blogging in the now prehistoric late 2000s.&lt;/p&gt;

&lt;p&gt;I’ve done a few blogs about different subjects (computer science, algorithms, web development, short stories and political ramblings). I’ve had blogs on Blogspot, Wordpress and, more recently, Medium.&lt;/p&gt;

&lt;p&gt;Those platforms were (or are, I suppose) an easy way to spew your ideas over the Internet while also being nice and comfy for other people to actually read (this last point is important for the CSS-challenged such as yours truly). In other words, those services Got Shit Done™.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Alas, as I opened my eyes to the wonders of web development I started noticing a few things. First, Wordpress is written in PHP, which is gross (just kidding). Second, you don’t really control much: you can pick themes or whatever, but you won’t have the full control you’d have by creating a website from scratch or nearly scratch. Third, and maybe a corollary to the previous point, that stuff is &lt;em&gt;bloated&lt;/em&gt;. There’s approximately 3 terabytes of mostly useless JavaScript, ads and all kind of crap I don’t care about.&lt;/p&gt;

&lt;p&gt;But most importantly, I understood the hidden costs of most “free” web services. You don’t really own anything. You provide content, and Wordpress or Google or whoever package that content into a neat bundle and servce it to your audience together with whatever else (&lt;em&gt;cough, trackers&lt;/em&gt;) they see fit.&lt;/p&gt;

&lt;p&gt;That’s one of the reasons that pushed me towards a less-walled-garden approach towards blogging. But there’s a nother reason as well.&lt;/p&gt;

&lt;p&gt;As &lt;a href="https://code.divshot.com/geo-bootstrap/"&gt;many others&lt;/a&gt;, I have fond memories of the late-90s/early-2000s Web 1.0 Internet. There is something warm and fuzzy about those beautifully terrible Geocities pages. They pierced the eyes of the viewer but were wondrous in a way. As I said, I’m not alone: Web 1.0 nostalgia is definitively &lt;a href="https://gizmodo.com/the-great-web-1-0-revival-1651487835"&gt;on the rise&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But why? What is not to like in our world of beautiful walled gardens? Surely it is better than those gross-looking Web 1.0 fan sites about some crappy GameBoy game, right? …Right?&lt;/p&gt;

&lt;div class="image-box stretch"&gt;
  &lt;div&gt;
    &lt;a href="/blog/assets/images/fan_page_screenshot.png" target="_blank"&gt;
      &lt;img class="lazy " data-src="/blog/assets/images/fan_page_screenshot.png" alt="View of an old website about Pokemon"&gt;
      &lt;noscript&gt;
        &lt;img src="/blog/assets/images/fan_page_screenshot.png" alt="View of an old website about Pokemon"&gt;
      &lt;/noscript&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
    &lt;div class="image-caption"&gt;We're soooo cooler than this in 2019.&lt;/div&gt;
  
&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Wrong.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Well, in many ways the Internet has of course improved over time. It has useful things like search engines and Wikipedia, and convenient subscription-based entertainment like Netflix. It has a whole bunch of nice stuff I could spend hours blabbering about.&lt;/p&gt;

&lt;p&gt;But it also has a lot of problems. At this point there are surely many PhD theses about most of them, so I won’t bother. I’m just going to recommend one &lt;a href="https://www.nytimes.com/2019/08/11/world/americas/youtube-brazil.html"&gt;New York Times article&lt;/a&gt; that explains how YouTube indirectly helped elect a buffoon that &lt;a href="https://extra.globo.com/noticias/brasil/bolsonaro-faz-piada-com-oriental-tudo-pequenininho-ai-veja-video-rv1-1-23668287.html"&gt;makes high school-tier penis jokes&lt;/a&gt; as president of Brazil.&lt;/p&gt;

&lt;p&gt;Now, the specific problem with today’s Internet that I feel is most relevant regarding blogging is how we’re gravitating towards all these “free” services all the time. Medium, for instance, is so &lt;em&gt;nice looking&lt;/em&gt; that one doesn’t even think of perhaps using something else. But what happens when &lt;em&gt;everyone&lt;/em&gt; uses Medium? First: all the blogs look exactly the same, which is lame. Second, Medium gets all that content and traffic for itself, for free.&lt;/p&gt;

&lt;p&gt;Of course, not everyone is skilled enough to build a personal blog from scratch. I am just barely able, as you can see from my lackluster front-end skills (I promise you I’m good on back-end things). So I’m definitively not dismissing the inclusiveness that services like Medium offer.&lt;/p&gt;

&lt;p&gt;But as I searched for a way out of the walled gardens and fiddled with &lt;a href="https://jekyllrb.com/"&gt;Jekyll&lt;/a&gt; for a while, I figured I might as well just &lt;a href="https://tjcx.me/posts/consumption-distraction/"&gt;build something to call my own&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="so-i-built-this"&gt;So I built this.&lt;/h2&gt;

&lt;p&gt;The goals were to create the simplest possible blogging system with as little fluff as possible. It should meet what I defined as basic blogging needs: list posts, show post, use tags, use images etc. And also not have 3 terabytes of JavaScript split in 90 requests just to show a fancy menu button.&lt;/p&gt;

&lt;p&gt;So I started messing with Nanoc, an excellent Ruby library for static page generation, and came up with &lt;a href="https://github.com/lbrito1/sane-blog-builder"&gt;this bad boy&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I won’t pretend these ideas are new. They aren’t! I feel there’s been an increasing amount of &lt;a href="https://code.divshot.com/geo-bootstrap/"&gt;Web 1.0 nostalgia&lt;/a&gt; going on, and a big part of that is probably fueled by &lt;a href="https://tjcx.me/posts/consumption-distraction/"&gt;similar sentiments&lt;/a&gt; as those I described. The &lt;a href="https://thebestmotherfucking.website/"&gt;longing for simplicity&lt;/a&gt; in a world of trillions of new JS frameworks is also quite widespread these days.&lt;/p&gt;

&lt;p&gt;This small project is nothing special. There are &lt;a href="https://github.com/remko/blog-skeleton"&gt;much better projects&lt;/a&gt; &lt;a href="https://clarkdave.net/2012/02/building-a-static-blog-with-nanoc/"&gt;available for free&lt;/a&gt; on the Internet done by people that actually know what they’re doing with a CSS file. This here is just a tiny vase with some ugly flowers – it would be ridiculous to compare it to the beautiful walled gardens of Medium or Wordpress. But, ugly as they are, they’re &lt;strong&gt;mine&lt;/strong&gt;!&lt;/p&gt;
</content>
  </entry>
</feed>

